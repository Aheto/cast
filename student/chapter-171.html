<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 172 ‚Äî Sight Words"/>
  <title>Mini OpenStax ‚Äî Lesson 172: Sight Words</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 172: Sight Words</h1>
        <div class="lo-tags" id="lo-tags">LO PH172: Recognize high-frequency sight words that break standard phonics rules</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>High-frequency <strong>sight words</strong> that often break standard decoding patterns:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. These sentences include sight words from Lesson 172:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      const currentChapter = 171;   // chapter-171.html = Lesson 172
      const maxChapter = 261;

      const CHAPTER_CONFIG = {
        title: "Lesson 172: Sight Words",
        loTags: ["LO PH172: Recognize high-frequency sight words that break standard phonics rules"],
        contentWords: [
          "break", "steak", "great", "wild", "child", "mild", "most", "post", "host",
          "door", "floor", "though", "dough", "thorough", "pint", "truth", "beauty", "beautiful"
        ],
        sentences: [
          "Two cups make a pint of liquid.",
          "We hope to have a mild winter this year.",
          "The post office will close for the holiday.",
          "Pete had a great time on his visit to the zoo.",
          "At the zoo, Pete saw a wild animal from Africa.",
          "The teacher gave each child a copy of the lesson.",
          "A plastic bottle won't break if you drop it on the floor.",
          "When you brush your teeth, you should take the time to be thorough.",
          "A trap door in the floor led us down a ladder and into a dim tunnel under the house."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word is a sight word that breaks the 'ea = /ƒì/' rule?", options: [{id:"a",text:"break",is_correct:true},{id:"b",text:"bead",is_correct:false},{id:"c",text:"beak",is_correct:false},{id:"d",text:"bean",is_correct:false}] },
          { id: "2", prompt: "Which is NOT a Lesson 172 word?", options: [{id:"a",text:"beautiful",is_correct:false},{id:"b",text:"truth",is_correct:false},{id:"c",text:"stream",is_correct:true},{id:"d",text:"though",is_correct:false}] },
          { id: "3", prompt: "How is 'ough' pronounced in 'though'?", options: [{id:"a",text:"/≈ç/",is_correct:true},{id:"b",text:"/≈≠f/",is_correct:false},{id:"c",text:"/≈èf/",is_correct:false},{id:"d",text:"/≈≠p/",is_correct:false}] },
          { id: "4", prompt: "Which word means 'not domesticated'?", options: [{id:"a",text:"wild",is_correct:true},{id:"b",text:"mild",is_correct:false},{id:"c",text:"child",is_correct:false},{id:"d",text:"most",is_correct:false}] },
          { id: "5", prompt: "How many letters in 'thorough'?", options: [{id:"a",text:"8",is_correct:true},{id:"b",text:"7",is_correct:false},{id:"c",text:"9",is_correct:false},{id:"d",text:"6",is_correct:false}] },
          { id: "6", prompt: "Which sentence uses only Lesson 172 words?", options: [{id:"a",text:"Two cups make a pint of liquid.",is_correct:true},{id:"b",text:"She sat on a mat.",is_correct:false},{id:"c",text:"He ran fast.",is_correct:false},{id:"d",text:"They played ball.",is_correct:false}] },
          { id: "7", prompt: "Which word means 'a young human being'?", options: [{id:"a",text:"child",is_correct:true},{id:"b",text:"host",is_correct:false},{id:"c",text:"post",is_correct:false},{id:"d",text:"door",is_correct:false}] },
          { id: "8", prompt: "Which word rhymes with 'post'?", options: [{id:"a",text:"host",is_correct:true},{id:"b",text:"most",is_correct:false},{id:"c",text:"floor",is_correct:false},{id:"d",text:"truth",is_correct:false}] },
          { id: "9", prompt: "In 'A plastic bottle won't break if you drop it on the floor,' how many Lesson 172 words?", options: [{id:"a",text:"2",is_correct:true},{id:"b",text:"1",is_correct:false},{id:"c",text:"3",is_correct:false},{id:"d",text:"0",is_correct:false}] },
          { id: "10", prompt: "Which word means 'complete and careful'?", options: [{id:"a",text:"thorough",is_correct:true},{id:"b",text:"beautiful",is_correct:false},{id:"c",text:"great",is_correct:false},{id:"d",text:"mild",is_correct:false}] },
          { id: "11", prompt: "Which word refers to a unit of liquid measurement?", options: [{id:"a",text:"pint",is_correct:true},{id:"b",text:"post",is_correct:false},{id:"c",text:"door",is_correct:false},{id:"d",text:"truth",is_correct:false}] },
          { id: "12", prompt: "Which word ends with 'ough' but sounds like 'do'?", options: [{id:"a",text:"dough",is_correct:true},{id:"b",text:"though",is_correct:false},{id:"c",text:"thorough",is_correct:false},{id:"d",text:"break",is_correct:false}] },
          { id: "13", prompt: "Which sentence is from Lesson 172?", options: [{id:"a",text:"We hope to have a mild winter this year.",is_correct:true},{id:"b",text:"She likes apples.",is_correct:false},{id:"c",text:"He jumped high.",is_correct:false},{id:"d",text:"They walked home.",is_correct:false}] },
          { id: "14", prompt: "How many consonants in 'beautiful'?", options: [{id:"a",text:"5",is_correct:true},{id:"b",text:"4",is_correct:false},{id:"c",text:"6",is_correct:false},{id:"d",text:"3",is_correct:false}] },
          { id: "15", prompt: "Which word is an adjective meaning 'gentle or moderate'?", options: [{id:"a",text:"mild",is_correct:true},{id:"b",text:"wild",is_correct:false},{id:"c",text:"truth",is_correct:false},{id:"d",text:"post",is_correct:false}] },
          { id: "16", prompt: "Which word does NOT follow regular Magic E rules?", options: [{id:"a",text:"great",is_correct:true},{id:"b",text:"steak",is_correct:true},{id:"c",text:"break",is_correct:true},{id:"d",text:"All of the above",is_correct:true}] },
          { id: "17", prompt: "Which word means 'actuality or fact'?", options: [{id:"a",text:"truth",is_correct:true},{id:"b",text:"beauty",is_correct:false},{id:"c",text:"child",is_correct:false},{id:"d",text:"floor",is_correct:false}] },
          { id: "18", prompt: "Which word might complete: 'She has a ___ voice.'?", options: [{id:"a",text:"beautiful",is_correct:true},{id:"b",text:"thorough",is_correct:false},{id:"c",text:"pint",is_correct:false},{id:"d",text:"host",is_correct:false}] },
          { id: "19", prompt: "Which word appears in both the word list and sentences?", options: [{id:"a",text:"pint",is_correct:true},{id:"b",text:"floor",is_correct:true},{id:"c",text:"child",is_correct:true},{id:"d",text:"All of the above",is_correct:true}] },
          { id: "20", prompt: "What is the main focus of Lesson 172?", options: [{id:"a",text:"Magic E patterns",is_correct:false},{id:"b",text:"Sight words that break phonics rules",is_correct:true},{id:"c",text:"R-controlled vowels",is_correct:false},{id:"d",text:"Vowel teams",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};

        const quizHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          let shuffledOptions = [...q.options];
          shuffle(shuffledOptions);

          const correctOpt = q.options.find(opt => opt.is_correct);
          window.quizCorrectMap[q.id] = correctOpt.id;

          const optionsHTML = shuffledOptions.map((opt, idx) => {
            const label = String.fromCharCode(97 + idx).toUpperCase();
            return `
              <div class="option">
                <label>
                  <input type="radio" name="q${q.id}" value="${opt.id}" required> ${label}. ${opt.text}
                </label>
              </div>
            `;
          }).join('');

          return `
            <div class="question">
              <strong>${q.id}. ${q.prompt}</strong>
              <div class="options">
                ${optionsHTML}
              </div>
            </div>
          `;
        }).join('');

        form.innerHTML = quizHTML;
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOptId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctOptId);
          const isCorrect = userAns === correctOptId;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 172*\nStudent: [Name]\nScore: ${score}\n\n`;
        const correctStr = correctList.length ? '‚úÖ CORRECT:\n' + correctList.join('\n\n') + '\n\n' : '';
        const incorrectStr = incorrectList.length ? '‚ùå INCORRECT:\n' + incorrectList.join('\n\n') : '';
        const message = encodeURIComponent(summary + correctStr + incorrectStr + `\nReport generated via Mini OpenStax. Share with instructor: https://wa.me/${CHAPTER_CONFIG.whatsappNumber}`);
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><strong>${correctCount >= 15 ? 'Excellent! You‚Äôve mastered these tricky sight words!' : correctCount >= 10 ? 'Good! Review missed items.' : 'Practice Lesson 172 words again.'}</strong></p>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
