<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 79 ‚Äì unk Words"/>
  <title>Mini OpenStax ‚Äî Lesson 79 (unk)</title>

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.6rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1rem 0; display: flex; gap: 0.4rem; justify-content: center; flex-wrap: wrap; }
    .chapter-btn { padding: 0.4rem 0.8rem; background: #007bff; color: #fff; text-decoration: none; border-radius: 4px; }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
    .word-item { background: #f8f9fa; padding: 0.3rem 0.6rem; border-radius: 4px; font-family: monospace; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .option { margin-left: 1rem; }
    .btn { background: #28a745; color: #fff; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>

<body>
<div class="container">
  <div class="header">
    <div>
      <h1 id="chapter-title">Lesson 79 ‚Äì unk</h1>
      <div id="lo-tags">Closed syllables: nk ‚Üí unk</div>
    </div>
    <div class="role-badge">Student View</div>
  </div>

  <nav class="chapter-nav" id="chapter-nav"></nav>

  <div class="section">
    <h2>üî§ Word List</h2>
    <div class="word-list" id="word-list"></div>
  </div>

  <div class="section">
    <h2>üìñ Practice Sentences</h2>
    <div id="sentences"></div>
  </div>

  <div class="quiz" id="quiz-container">
    <h2>üìù Quick Check (20 Questions)</h2>
    <form id="quiz-form"></form>
    <button type="button" class="btn" id="submit-quiz">Check Answers</button>
  </div>

  <div id="feedback"></div>
</div>

<script>
(function () {
  'use strict';
  window.startTime = Date.now();

  function createSeededRNG(seed) {
    let state = Math.abs((seed * 9301 + 49297) % 233280);
    return function () {
      state = (state * 9301 + 49297) % 233280;
      return state / 233280;
    };
  }

  function shuffleWithSeed(array, seed) {
    const rng = createSeededRNG(seed);
    const arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(rng() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  const currentChapter = 78;
  const MAX_CHAPTER = 261;

  const CHAPTER_CONFIG = {
    title: "Lesson 79 ‚Äì unk",
    loTags: ["Closed syllables: nk ‚Üí unk"],
    contentWords: [
      "sunk","junk","bunk","hunk","dunk","flunk","plunk","slunk",
      "skunk","stunk","chunk","drunk","trunk","shrunk"
    ],
    sentences: [
      "Max cut a chunk from a ham.",
      "Max had a hunk of ham at lunch.",
      "Frank slept on a bunk bed at camp.",
      "Frank can dunk Hank in the pond.",
      "Kim kept her junk in a big trunk.",
      "Beth did not flunk the big math test.",
      "The dog ran from the skunk. The skunk stunk!",
      "Brad had let the cap get wet, and it had shrunk."
    ],
    assessmentItems: Array.from({ length: 20 }, (_, i) => {
      const correct = ["junk","bunk","chunk","skunk","trunk","drunk","shrunk","stunk"][i % 8];
      return {
        id: i + 1,
        prompt: `Which word has the **unk** spelling pattern?`,
        options: shuffleWithSeed([
          { id: "A", text: correct, is_correct: true },
          { id: "B", text: "bank", is_correct: false },
          { id: "C", text: "sand", is_correct: false },
          { id: "D", text: "ring", is_correct: false }
        ], i + 99)
      };
    })
  };

  function renderNav() {
    const nav = document.getElementById("chapter-nav");
    nav.innerHTML = `
      <a class="chapter-btn" href="../index.html">Home</a>
      <a class="chapter-btn active" href="chapter-78.html">Lesson 79</a>
      <a class="chapter-btn" href="chapter-79.html">Lesson 80</a>
    `;
  }

  function renderWords() {
    document.getElementById("word-list").innerHTML =
      CHAPTER_CONFIG.contentWords.map(w => `<span class="word-item">${w}</span>`).join("");
  }

  function renderSentences() {
    document.getElementById("sentences").innerHTML =
      CHAPTER_CONFIG.sentences.map(s => `<p>${s}</p>`).join("");
  }

  function renderQuiz() {
    const seed = currentChapter * 1000000 + (Date.now() % 1000000);
    const form = document.getElementById("quiz-form");
    window.correctMap = {};

    form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
      const opts = shuffleWithSeed(q.options, seed + q.id);
      const correct = opts.find(o => o.is_correct);
      window.correctMap[q.id] = correct.id;

      return `
        <div class="question">
          <strong>${q.id}. ${q.prompt}</strong>
          ${opts.map((o,i)=>`
            <div class="option">
              <label>
                <input type="radio" name="q${q.id}" value="${o.id}" required>
                ${String.fromCharCode(65+i)}. ${o.text}
              </label>
            </div>`).join("")}
        </div>`;
    }).join("");
  }

  document.getElementById("submit-quiz").onclick = () => {
    let score = 0;
    CHAPTER_CONFIG.assessmentItems.forEach(q => {
      const ans = document.querySelector(`input[name="q${q.id}"]:checked`);
      if (ans && ans.value === window.correctMap[q.id]) score++;
    });
    document.getElementById("feedback").innerHTML =
      `<div class="feedback"><h3>Score: ${score}/20</h3></div>`;
  };

  renderNav();
  renderWords();
  renderSentences();
  renderQuiz();
})();
</script>
</body>
</html>
