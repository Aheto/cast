<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 117 ‚Äî Endings with ed as /d/"/>
  <title>Mini OpenStax ‚Äî Lesson 117: ed as /d/ Endings</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 117: ed as /d/ Endings</h1>
        <div class="lo-tags" id="lo-tags">LO PH117: Recognize and decode the /d/ sound in past tense endings following voiced consonants (except d).</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words where the ending <strong>-ed</strong> is pronounced as a simple <strong>/d/</strong> sound. These do <strong>not</strong> add an extra syllable:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read these sentences aloud. Notice that the -ed ending sounds like /d/ and blends into the word:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      const currentChapter = 116;    // chapter-116.html = Lesson 117
      const maxChapter = 150;        

      const CHAPTER_CONFIG = {
        title: "Lesson 117: ed as /d/ Endings",
        loTags: ["LO PH117: Recognize and decode the /d/ sound in past tense endings following voiced consonants (except d)."],
        contentWords: [
          "filled", "spilled", "yelled", "smelled", "cooled", "fooled", "mailed", "sailed", "boiled", "spoiled", "howled", "growled", "crawled", "soared", "cheered", "steered", "aimed", "claimed", "seemed", "dreamed", "rained", "sprained", "moaned", "groaned", "loaned", "cleaned", "yawned", "frowned", "stayed", "played"
        ],
        sentences: [
          "1) Jill filled her glass with milk.",
          "2) Ray boiled some eggs in a big pot.",
          "3) Lee cleaned the dishes in the sink.",
          "4) The dog sat and howled at the moon.",
          "5) The dog growled when it smelled a cat.",
          "6) Beth played a trick on Roy and fooled him.",
          "7) The crowd cheered when the team played well.",
          "8) Max moaned and groaned when he sprained his leg.",
          "9) It rained all day so we stayed in the house.",
          "10) Mom mailed a gift to her pal back east."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "What did Jill fill her glass with?", options: [{id:"a",text:"water",is_correct:false},{id:"b",text:"milk",is_correct:true},{id:"c",text:"juice",is_correct:false},{id:"d",text:"tea",is_correct:false}] },
          { id: "2", prompt: "What did Ray boil in a big pot?", options: [{id:"a",text:"corn",is_correct:false},{id:"b",text:"beef",is_correct:false},{id:"c",text:"eggs",is_correct:true},{id:"d",text:"beans",is_correct:false}] },
          { id: "3", prompt: "Where did Lee clean the dishes?", options: [{id:"a",text:"in the tub",is_correct:false},{id:"b",text:"in the sink",is_correct:true},{id:"c",text:"on the lawn",is_correct:false},{id:"d",text:"at the shop",is_correct:false}] },
          { id: "4", prompt: "What did the dog howl at?", options: [{id:"a",text:"a cat",is_correct:false},{id:"b",text:"the moon",is_correct:true},{id:"c",text:"the sun",is_correct:false},{id:"d",text:"the mailman",is_correct:false}] },
          { id: "5", prompt: "When did the dog growl?", options: [{id:"a",text:"when it was hungry",is_correct:false},{id:"b",text:"when it saw the moon",is_correct:false},{id:"c",text:"when it smelled a cat",is_correct:true},{id:"d",text:"when it played a trick",is_correct:false}] },
          { id: "6", prompt: "Who did Beth play a trick on?", options: [{id:"a",text:"Jill",is_correct:false},{id:"b",text:"Roy",is_correct:true},{id:"c",text:"Lee",is_correct:false},{id:"d",text:"Max",is_correct:false}] },
          { id: "7", prompt: "When did the crowd cheer?", options: [{id:"a",text:"when the sun came out",is_correct:false},{id:"b",text:"when the film ended",is_correct:false},{id:"c",text:"when the team played well",is_correct:true},{id:"d",text:"when it rained",is_correct:false}] },
          { id: "8", prompt: "What happened to Max's leg?", options: [{id:"a",text:"he broke it",is_correct:false},{id:"b",text:"he sprained it",is_correct:true},{id:"c",text:"he cleaned it",is_correct:false},{id:"d",text:"he dreamed of it",is_correct:false}] },
          { id: "9", prompt: "What did Max do when he sprained his leg?", options: [{id:"a",text:"he cheered",is_correct:false},{id:"b",text:"he moaned and groaned",is_correct:true},{id:"c",text:"he yelled",is_correct:false},{id:"d",text:"he fainted",is_correct:false}] },
          { id: "10", prompt: "Why did we stay in the house?", options: [{id:"a",text:"it was cold",is_correct:false},{id:"b",text:"it rained all day",is_correct:true},{id:"c",text:"we were tired",is_correct:false},{id:"d",text:"we were fooled",is_correct:false}] },
          { id: "11", prompt: "What did Mom mail to her pal?", options: [{id:"a",text:"a card",is_correct:false},{id:"b",text:"a gift",is_correct:true},{id:"c",text:"a box of peaches",is_correct:false},{id:"d",text:"some tools",is_correct:false}] },
          { id: "12", prompt: "Which word means to have shouted loudly?", options: [{id:"a",text:"yawned",is_correct:false},{id:"b",text:"yelled",is_correct:true},{id:"c",text:"sailed",is_correct:false},{id:"d",text:"aimed",is_correct:false}] },
          { id: "13", prompt: "In the word 'played', the -ed sounds like:", options: [{id:"a",text:"/t/",is_correct:false},{id:"b",text:"/d/",is_correct:true},{id:"c",text:"/ed/",is_correct:false},{id:"d",text:"/s/",is_correct:false}] },
          { id: "14", prompt: "Which word is the past tense of 'clean'?", options: [{id:"a",text:"cleans",is_correct:false},{id:"b",text:"cleaned",is_correct:true},{id:"c",text:"clean",is_correct:false},{id:"d",text:"cleaning",is_correct:false}] },
          { id: "15", prompt: "Does the word 'filled' have one or two syllables?", options: [{id:"a",text:"one",is_correct:true},{id:"b",text:"two",is_correct:false},{id:"c",text:"three",is_correct:false},{id:"d",text:"none",is_correct:false}] },
          { id: "16", prompt: "Complete the word: f _ _ led (tricked).", options: [{id:"a",text:"oo",is_correct:true},{id:"b",text:"ee",is_correct:false},{id:"c",text:"oa",is_correct:false},{id:"d",text:"ai",is_correct:false}] },
          { id: "17", prompt: "Which word describes what a jet does in the sky?", options: [{id:"a",text:"sailed",is_correct:false},{id:"b",text:"soared",is_correct:true},{id:"c",text:"crawled",is_correct:false},{id:"d",text:"loaned",is_correct:false}] },
          { id: "18", prompt: "Which word means to have moved on hands and knees?", options: [{id:"a",text:"steered",is_correct:false},{id:"b",text:"crawled",is_correct:true},{id:"c",text:"sailed",is_correct:false},{id:"d",text:"yawned",is_correct:false}] },
          { id: "19", prompt: "What is the past tense of 'stay'?", options: [{id:"a",text:"staid",is_correct:false},{id:"b",text:"stayed",is_correct:true},{id:"c",text:"stays",is_correct:false},{id:"d",text:"stayen",is_correct:false}] },
          { id: "20", prompt: "Which word means something went bad (like food)?", options: [{id:"a",text:"boiled",is_correct:false},{id:"b",text:"spoiled",is_correct:true},{id:"c",text:"spilled",is_correct:false},{id:"d",text:"smelled",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => `
          <div class="question">
            <strong>${q.id}. ${q.prompt}</strong>
            <div class="options">
              ${q.options.map(opt => `
                <div class="option">
                  <label>
                    <input type="radio" name="q${q.id}" value="${opt.id}" required> ${opt.id.toUpperCase()}. ${opt.text}
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOpt = item.options.find(o => o.is_correct);
          const isCorrect = userAns === correctOpt.id;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 117*\nStudent: [Name]\nScore: ${score}\n\n`;
        const message = encodeURIComponent(summary + correctList.join('\n\n') + '\n\n' + incorrectList.join('\n\n'));
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      init();
    })();
  </script>
</body>
</html>
