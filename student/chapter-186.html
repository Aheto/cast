<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 187 ‚Äî Vowel Team ey=/ƒì/"/>
  <title>Mini OpenStax ‚Äî Lesson 187: ey = /ƒì/</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 187: ey = /ƒì/</h1>
        <div class="lo-tags" id="lo-tags">LO PH187: Decode words with vowel team ey = /ƒì/</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words with the <strong>vowel team</strong> <em>ey</em> making the <strong>/ƒì/</strong> sound:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. All words are decodable from Lessons 2‚Äì187:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      const currentChapter = 186;   // chapter-186.html = Lesson 187
      const maxChapter = 261;

      const CHAPTER_CONFIG = {
        title: "Lesson 187: ey = /ƒì/",
        loTags: ["LO PH187: Decode words with vowel team ey = /ƒì/"],
        contentWords: [
          "key", "donkey", "chimney", "alley", "valley", "hockey", "jockey"
        ],
        sentences: [
          "The stray cat can prowl around the alley.",
          "At the ranch, Jake saw a donkey and a pony.",
          "Judy must use her key to open the locked door.",
          "A wide river ran through the middle of the valley.",
          "The champion jockey must defend his title in the race.",
          "In the winter, the children like to play ice hockey on the frozen pond.",
          "The black smoke that rose from the chimney of the house was carried off by the wind."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word ends with the vowel team 'ey' making /ƒì/?", options: [{id:"a",text:"key",is_correct:true},{id:"b",text:"cat",is_correct:false},{id:"c",text:"cap",is_correct:false},{id:"d",text:"cab",is_correct:false}] },
          { id: "2", prompt: "Which is NOT a Lesson 187 word?", options: [{id:"a",text:"valley",is_correct:false},{id:"b",text:"alley",is_correct:false},{id:"c",text:"monkey",is_correct:true},{id:"d",text:"jockey",is_correct:false}] },
          { id: "3", prompt: "In 'donkey', what makes the final sound /ƒì/?", options: [{id:"a",text:"Vowel team 'ey'",is_correct:true},{id:"b",text:"Silent e",is_correct:false},{id:"c",text:"Magic E",is_correct:false},{id:"d",text:"Y as consonant",is_correct:false}] },
          { id: "4", prompt: "Which word means 'a tool to unlock a door'?", options: [{id:"a",text:"key",is_correct:true},{id:"b",text:"alley",is_correct:false},{id:"c",text:"valley",is_correct:false},{id:"d",text:"chimney",is_correct:false}] },
          { id: "5", prompt: "How many syllables in 'hockey'?", options: [{id:"a",text:"2",is_correct:true},{id:"b",text:"1",is_correct:false},{id:"c",text:"3",is_correct:false},{id:"d",text:"4",is_correct:false}] },
          { id: "6", prompt: "Which sentence uses only Lesson 187 words?", options: [{id:"a",text:"Judy must use her key to open the locked door.",is_correct:true},{id:"b",text:"She sat on a mat.",is_correct:false},{id:"c",text:"He ran fast.",is_correct:false},{id:"d",text:"They played ball.",is_correct:false}] },
          { id: "7", prompt: "Which word refers to a narrow passageway between buildings?", options: [{id:"a",text:"alley",is_correct:true},{id:"b",text:"valley",is_correct:false},{id:"c",text:"chimney",is_correct:false},{id:"d",text:"donkey",is_correct:false}] },
          { id: "8", prompt: "What vowel team is in 'jockey'?", options: [{id:"a",text:"ey",is_correct:true},{id:"b",text:"ie",is_correct:false},{id:"c",text:"ea",is_correct:false},{id:"d",text:"ai",is_correct:false}] },
          { id: "9", prompt: "In 'The black smoke rose from the chimney,' how many Lesson 187 words?", options: [{id:"a",text:"1",is_correct:true},{id:"b",text:"2",is_correct:false},{id:"c",text:"0",is_correct:false},{id:"d",text:"3",is_correct:false}] },
          { id: "10", prompt: "Which word means 'a professional horse rider in races'?", options: [{id:"a",text:"jockey",is_correct:true},{id:"b",text:"hockey",is_correct:false},{id:"c",text:"donkey",is_correct:false},{id:"d",text:"key",is_correct:false}] },
          { id: "11", prompt: "Which word describes a low area between hills, often with a river?", options: [{id:"a",text:"valley",is_correct:true},{id:"b",text:"alley",is_correct:false},{id:"c",text:"chimney",is_correct:false},{id:"d",text:"hockey",is_correct:false}] },
          { id: "12", prompt: "Which word ends with 'ey' and names a domesticated animal similar to a horse?", options: [{id:"a",text:"donkey",is_correct:true},{id:"b",text:"key",is_correct:false},{id:"c",text:"jockey",is_correct:false},{id:"d",text:"valley",is_correct:false}] },
          { id: "13", prompt: "Which sentence is from Lesson 187?", options: [{id:"a",text:"In the winter, the children like to play ice hockey on the frozen pond.",is_correct:true},{id:"b",text:"She likes apples.",is_correct:false},{id:"c",text:"He jumped high.",is_correct:false},{id:"d",text:"They walked home.",is_correct:false}] },
          { id: "14", prompt: "How many consonants in 'chimney'?", options: [{id:"a",text:"5",is_correct:true},{id:"b",text:"4",is_correct:false},{id:"c",text:"6",is_correct:false},{id:"d",text:"3",is_correct:false}] },
          { id: "15", prompt: "Which word refers to a structure on a roof that carries smoke from a fire?", options: [{id:"a",text:"chimney",is_correct:true},{id:"b",text:"alley",is_correct:false},{id:"c",text:"valley",is_correct:false},{id:"d",text:"key",is_correct:false}] },
          { id: "16", prompt: "What phonics pattern is in 'valley'?", options: [{id:"a",text:"ey = /ƒì/",is_correct:true},{id:"b",text:"Magic E",is_correct:false},{id:"c",text:"Closed syllable",is_correct:false},{id:"d",text:"Vowel team 'ie'",is_correct:false}] },
          { id: "17", prompt: "Which sport is played on ice with sticks and a puck?", options: [{id:"a",text:"hockey",is_correct:true},{id:"b",text:"jockey",is_correct:false},{id:"c",text:"donkey",is_correct:false},{id:"d",text:"alley",is_correct:false}] },
          { id: "18", prompt: "Which word might complete: 'He lost his house ___.'?", options: [{id:"a",text:"key",is_correct:true},{id:"b",text:"valley",is_correct:false},{id:"c",text:"chimney",is_correct:false},{id:"d",text:"jockey",is_correct:false}] },
          { id: "19", prompt: "Which word appears in both the word list and sentences?", options: [{id:"a",text:"alley",is_correct:true},{id:"b",text:"donkey",is_correct:true},{id:"c",text:"key",is_correct:true},{id:"d",text:"All of the above",is_correct:true}] },
          { id: "20", prompt: "What phonics concept is taught in Lesson 187?", options: [{id:"a",text:"Vowel team ey = /ƒì/",is_correct:true},{id:"b",text:"Split vowel pairs",is_correct:false},{id:"c",text:"Magic E",is_correct:false},{id:"d",text:"R-controlled vowels",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};

        const quizHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          let shuffledOptions = [...q.options];
          shuffle(shuffledOptions);

          const correctOpt = q.options.find(opt => opt.is_correct);
          window.quizCorrectMap[q.id] = correctOpt.id;

          const optionsHTML = shuffledOptions.map((opt, idx) => {
            const label = String.fromCharCode(97 + idx).toUpperCase();
            return `
              <div class="option">
                <label>
                  <input type="radio" name="q${q.id}" value="${opt.id}" required> ${label}. ${opt.text}
                </label>
              </div>
            `;
          }).join('');

          return `
            <div class="question">
              <strong>${q.id}. ${q.prompt}</strong>
              <div class="options">
                ${optionsHTML}
              </div>
            </div>
          `;
        }).join('');

        form.innerHTML = quizHTML;
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOptId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctOptId);
          const isCorrect = userAns === correctOptId;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20}`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 187*\nStudent: [Name]\nScore: ${score}\n\n`;
        const correctStr = correctList.length ? '‚úÖ CORRECT:\n' + correctList.join('\n\n') + '\n\n' : '';
        const incorrectStr = incorrectList.length ? '‚ùå INCORRECT:\n' + incorrectList.join('\n\n') : '';
        const message = encodeURIComponent(summary + correctStr + incorrectStr + `\nReport generated via Mini OpenStax. Share with instructor: https://wa.me/${CHAPTER_CONFIG.whatsappNumber}`);
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><strong>${correctCount >= 15 ? 'Excellent! You‚Äôve mastered the ey=/ƒì/ pattern!' : correctCount >= 10 ? 'Good! Review missed items.' : 'Practice Lesson 187 words again.'}</strong></p>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
