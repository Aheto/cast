<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 229 ‚Äî Short Vowel a = /ƒÉ/ (labeled as a=/≈è/ in source)"/>
  <title>Mini OpenStax ‚Äî Lesson 229: a = /ƒÉ/</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 229: a = /ƒÉ/</h1>
        <div class="lo-tags" id="lo-tags">LO PH229: Decode words with short vowel a = /ƒÉ/ (labeled as a=/≈è/ in source)</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words with the <strong>short vowel</strong> <em>a</em> making the <strong>/ƒÉ/</strong> sound:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. All words are decodable from Lessons 2‚Äì229:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      const currentChapter = 228;   // chapter-228.html = Lesson 229
      const maxChapter = 261;

      const CHAPTER_CONFIG = {
        title: "Lesson 229: a = /ƒÉ/",
        loTags: ["LO PH229: Decode words with short vowel a = /ƒÉ/ (labeled as a=/≈è/ in source)"],
        contentWords: [
          "want", "wand", "wash", "wasp", "watch", "water", "wander", "waffle",
          "swan", "swat", "swap", "swamp",
          "quantity", "squat", "squash", "squabble"
        ],
        sentences: [
          "Joe can swap his old bike for a new one.",
          "Earl doesn't want to be late for his class.",
          "Earl should check his watch to see what time it is.",
          "At the park, Jane saw a swan swimming in the pond.",
          "The two little boys began to squabble over the toy.",
          "Walter tried to swat the wasp before it could sting him.",
          "Mike must wash his face with soap and water before he goes to bed.",
          "A parent must make sure that a small child does not wander off and get lost."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word contains 'a' making /ƒÉ/?", options: [{id:"a",text:"want",is_correct:true},{id:"b",text:"wane",is_correct:false},{id:"c",text:"ware",is_correct:false},{id:"d",text:"wave",is_correct:false}] },
          { id: "2", prompt: "Which is NOT a Lesson 229 word?", options: [{id:"a",text:"squash",is_correct:false},{id:"b",text:"swamp",is_correct:false},{id:"c",text:"square",is_correct:true},{id:"d",text:"squabble",is_correct:false}] },
          { id: "3", prompt: "In 'wash', what sound does 'a' make?", options: [{id:"a",text:"/ƒÉ/",is_correct:true},{id:"b",text:"/ƒÅ/",is_correct:false},{id:"c",text:"/√¥/",is_correct:false},{id:"d",text:"/o/",is_correct:false}] },
          { id: "4", prompt: "Which word means 'to exchange one thing for another'?", options: [{id:"a",text:"swap",is_correct:true},{id:"b",text:"swat",is_correct:false},{id:"c",text:"swan",is_correct:false},{id:"d",text:"squash",is_correct:false}] },
          { id: "5", prompt: "How many letters in 'waffle'?", options: [{id:"a",text:"6",is_correct:true},{id:"b",text:"5",is_correct:false},{id:"c",text:"7",is_correct:false},{id:"d",text:"4",is_correct:false}] },
          { id: "6", prompt: "Which sentence uses only Lesson 229 words?", options: [{id:"a",text:"Joe can swap his old bike for a new one.",is_correct:true},{id:"b",text:"She sat on a mat.",is_correct:false},{id:"c",text:"He ran fast.",is_correct:false},{id:"d",text:"They played ball.",is_correct:false}] },
          { id: "7", prompt: "Which word refers to a large water bird with a long neck?", options: [{id:"a",text:"swan",is_correct:true},{id:"b",text:"wasp",is_correct:false},{id:"c",text:"wand",is_correct:false},{id:"d",text:"watch",is_correct:false}] },
          { id: "8", prompt: "What vowel sound is in 'squabble'?", options: [{id:"a",text:"Short a (/ƒÉ/)",is_correct:true},{id:"b",text:"Long a (/ƒÅ/)",is_correct:false},{id:"c",text:"Short o (/≈è/)",is_correct:false},{id:"d",text:"Long o (/≈ç/)",is_correct:false}] },
          { id: "9", prompt: "In 'Walter tried to swat the wasp before it could sting him,' how many Lesson 229 words?", options: [{id:"a",text:"2",is_correct:true},{id:"b",text:"1",is_correct:false},{id:"c",text:"3",is_correct:false},{id:"d",text:"0",is_correct:false}] },
          { id: "10", prompt: "Which word means 'to strike quickly with an open hand or object'?", options: [{id:"a",text:"swat",is_correct:true},{id:"b",text:"swap",is_correct:false},{id:"c",text:"swamp",is_correct:false},{id:"d",text:"squash",is_correct:false}] },
          { id: "11", prompt: "Which word describes a wetland filled with trees and water?", options: [{id:"a",text:"swamp",is_correct:true},{id:"b",text:"squash",is_correct:false},{id:"c",text:"quantity",is_correct:false},{id:"d",text:"waffle",is_correct:false}] },
          { id: "12", prompt: "Which word ends with 'a' and means 'to move about without a fixed course'?", options: [{id:"a",text:"wander",is_correct:true},{id:"b",text:"want",is_correct:false},{id:"c",text:"wash",is_correct:false},{id:"d",text:"watch",is_correct:false}] },
          { id: "13", prompt: "Which sentence is from Lesson 229?", options: [{id:"a",text:"At the park, Jane saw a swan swimming in the pond.",is_correct:true},{id:"b",text:"She likes apples.",is_correct:false},{id:"c",text:"He jumped high.",is_correct:false},{id:"d",text:"They walked home.",is_correct:false}] },
          { id: "14", prompt: "How many consonants in 'quantity'?", options: [{id:"a",text:"6",is_correct:true},{id:"b",text:"5",is_correct:false},{id:"c",text:"7",is_correct:false},{id:"d",text:"4",is_correct:false}] },
          { id: "15", prompt: "Which word means 'to flatten by pressure'?", options: [{id:"a",text:"squash",is_correct:true},{id:"b",text:"squabble",is_correct:false},{id:"c",text:"squat",is_correct:false},{id:"d",text:"swap",is_correct:false}] },
          { id: "16", prompt: "What phonics pattern is in 'watch'?", options: [{id:"a",text:"Short vowel a = /ƒÉ/",is_correct:true},{id:"b",text:"Magic E",is_correct:false},{id:"c",text:"Closed syllable",is_correct:false},{id:"d",text:"Vowel team 'ie'",is_correct:false}] },
          { id: "17", prompt: "Which word refers to a slender stick used by magicians?", options: [{id:"a",text:"wand",is_correct:true},{id:"b",text:"wasp",is_correct:false},{id:"c",text:"water",is_correct:false},{id:"d",text:"waffle",is_correct:false}] },
          { id: "18", prompt: "Which word might complete: 'Don‚Äôt ___ with your brother.'?", options: [{id:"a",text:"squabble",is_correct:true},{id:"b",text:"swap",is_correct:false},{id:"c",text:"swat",is_correct:false},{id:"d",text:"swan",is_correct:false}] },
          { id: "19", prompt: "Which word appears in both the word list and sentences?", options: [{id:"a",text:"swap",is_correct:true},{id:"b",text:"want",is_correct:true},{id:"c",text:"swan",is_correct:true},{id:"d",text:"All of the above",is_correct:true}] },
          { id: "20", prompt: "What phonics concept is taught in Lesson 229?", options: [{id:"a",text:"Short vowel a = /ƒÉ/ (source labels as a=/≈è/)",is_correct:true},{id:"b",text:"Split vowel pairs",is_correct:false},{id:"c",text:"Magic E",is_correct:false},{id:"d",text:"R-controlled vowels",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};

        const quizHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          let shuffledOptions = [...q.options];
          shuffle(shuffledOptions);

          const correctOpt = q.options.find(opt => opt.is_correct);
          window.quizCorrectMap[q.id] = correctOpt.id;

          const optionsHTML = shuffledOptions.map((opt, idx) => {
            const label = String.fromCharCode(97 + idx).toUpperCase();
            return `
              <div class="option">
                <label>
                  <input type="radio" name="q${q.id}" value="${opt.id}" required> ${label}. ${opt.text}
                </label>
              </div>
            `;
          }).join('');

          return `
            <div class="question">
              <strong>${q.id}. ${q.prompt}</strong>
              <div class="options">
                ${optionsHTML}
              </div>
            </div>
          `;
        }).join('');

        form.innerHTML = quizHTML;
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOptId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctOptId);
          const isCorrect = userAns === correctOptId;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20}`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 229*\nStudent: [Name]\nScore: ${score}\n\n`;
        const correctStr = correctList.length ? '‚úÖ CORRECT:\n' + correctList.join('\n\n') + '\n\n' : '';
        const incorrectStr = incorrectList.length ? '‚ùå INCORRECT:\n' + incorrectList.join('\n\n') : '';
        const message = encodeURIComponent(summary + correctStr + incorrectStr + `\nReport generated via Mini OpenStax. Share with instructor: https://wa.me/${CHAPTER_CONFIG.whatsappNumber}`);
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><strong>${correctCount >= 15 ? 'Excellent! You‚Äôve mastered short a=/ƒÉ/!' : correctCount >= 10 ? 'Good! Review missed items.' : 'Practice Lesson 229 words again.'}</strong></p>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
