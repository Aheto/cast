<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 103: aw"/>
  <title>Mini OpenStax ‚Äî Lesson 103: aw</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn {
      background: #28a745; color: white; border: none; padding: 0.5rem 1rem;
      border-radius: 4px; cursor: pointer; font-size: 1rem; margin-right: 0.5rem;
    }
    .btn:hover { background: #218838; }
    .btn-secondary { background: #6c757d; }
    .btn-secondary:hover { background: #5a6268; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 103: aw</h1>
        <div class="lo-tags" id="lo-tags">LO PH103: Decode words with vowel team "aw" pronounced /»Ø/</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words with "aw" that say /»Ø/ (as in <em>law</em>):</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div id="student-name-prompt" class="section" style="display:none;">
        <h2>üë§ Your Name</h2>
        <div id="name-display"></div>
        <input type="text" id="student-name" placeholder="Enter your name" maxlength="30"
          style="padding:0.5rem;font-size:1rem;width:100%;margin:0.5rem 0;display:none;">
        <div id="name-buttons"></div>
      </div>

      <div class="quiz" id="quiz-container" style="display:none;">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';
      window.startTime = Date.now();

      function createSeededRNG(seed) {
        let state = Math.abs((seed * 9301 + 49297) % 233280);
        return () => {
          state = (state * 9301 + 49297) % 233280;
          return state / 233280;
        };
      }

      function shuffleWithSeed(array, seed) {
        const rng = createSeededRNG(seed);
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(rng() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      const currentChapter = 102;
      const MAX_CHAPTER = 261;
      const WHATSAPP_NUMBER = "233257320201";

      const CHAPTER_CONFIG = {
        title: "Lesson 103: aw",
        loTags: ["LO PH103: Decode words with vowel team \"aw\" pronounced /»Ø/"],
        contentWords: [
          "paw", "jaw", "law", "saw", "caw", "raw", "claw", "flaw", "slaw", "draw", "straw", "thaw", "awl", "bawl", "brawl",
          "crawl", "drawl", "shawl", "scrawl", "sprawl", "dawn", "pawn", "lawn", "fawn", "yawn", "prawn", "drawn", "brawn", "hawk", "squawk", "squaw"
        ],
        sentences: [
          "A hawk can soar on the wind.",
          "A hawk can swoop down and catch a rat with a claw.",
          "Ann will sit and rub her jaw and think.",
          "The deer hid in the brush with her fawn.",
          "Dawn found a flaw in the seam of the dress.",
          "Jean can draw a sketch of her cat on a sketch pad.",
          "At the ranch, Ray must get up at dawn to milk the cow.",
          "The fox can crawl up and get near the hen.",
          "When the hen saw the fox, it let out a loud screech."
        ],
        assessmentItems: [
          { id: "1", prompt: "Which word has 'aw' that says /»Ø/ as in 'law'?", options: [
            {id:"a",text:"cat",is_correct:false},
            {id:"b",text:"saw",is_correct:true},
            {id:"c",text:"cap",is_correct:false},
            {id:"d",text:"cut",is_correct:false}
          ]},
          { id: "2", prompt: "Which word means 'a legal rule or system'?", options: [
            {id:"a",text:"law",is_correct:true},
            {id:"b",text:"paw",is_correct:false},
            {id:"c",text:"jaw",is_correct:false},
            {id:"d",text:"claw",is_correct:false}
          ]},
          { id: "3", prompt: "Which word rhymes with 'draw'?", options: [
            {id:"a",text:"saw",is_correct:true},
            {id:"b",text:"cat",is_correct:false},
            {id:"c",text:"red",is_correct:false},
            {id:"d",text:"run",is_correct:false}
          ]},
          { id: "4", prompt: "Which word is part of an animal's foot?", options: [
            {id:"a",text:"paw",is_correct:true},
            {id:"b",text:"law",is_correct:false},
            {id:"c",text:"jaw",is_correct:false},
            {id:"d",text:"flaw",is_correct:false}
          ]},
          { id: "5", prompt: "Which sentence uses a word with 'aw' = /»Ø/?", options: [
            {id:"a",text:"He ran fast.",is_correct:false},
            {id:"b",text:"Ray must get up at dawn.",is_correct:true},
            {id:"c",text:"It is cold.",is_correct:false},
            {id:"d",text:"They played.",is_correct:false}
          ]},
          { id: "6", prompt: "Which word means 'to move slowly on hands and knees'?", options: [
            {id:"a",text:"crawl",is_correct:true},
            {id:"b",text:"brawl",is_correct:false},
            {id:"c",text:"sprawl",is_correct:false},
            {id:"d",text:"scrawl",is_correct:false}
          ]},
          { id: "7", prompt: "Which word describes a young deer?", options: [
            {id:"a",text:"fawn",is_correct:true},
            {id:"b",text:"lawn",is_correct:false},
            {id:"c",text:"pawn",is_correct:false},
            {id:"d",text:"dawn",is_correct:false}
          ]},
          { id: "8", prompt: "How is 'aw' pronounced in 'hawk'?", options: [
            {id:"a",text:"/ƒÉ/",is_correct:false},
            {id:"b",text:"/≈ç/",is_correct:false},
            {id:"c",text:"/»Ø/",is_correct:true},
            {id:"d",text:"/ƒ≠/",is_correct:false}
          ]},
          { id: "9", prompt: "Which word means 'to make loud cries like a baby'?", options: [
            {id:"a",text:"bawl",is_correct:true},
            {id:"b",text:"squawk",is_correct:false},
            {id:"c",text:"drawl",is_correct:false},
            {id:"d",text:"yawn",is_correct:false}
          ]},
          { id: "10", prompt: "Which word comes FIRST alphabetically?", options: [
            {id:"a",text:"awl",is_correct:true},
            {id:"b",text:"bawl",is_correct:false},
            {id:"c",text:"brawl",is_correct:false},
            {id:"d",text:"claw",is_correct:false}
          ]},
          { id: "11", prompt: "Which word is a thin shawl worn over the shoulders?", options: [
            {id:"a",text:"shawl",is_correct:true},
            {id:"b",text:"slaw",is_correct:false},
            {id:"c",text:"straw",is_correct:false},
            {id:"d",text:"thaw",is_correct:false}
          ]},
          { id: "12", prompt: "Which word is NOT in the word list?", options: [
            {id:"a",text:"scrawl",is_correct:false},
            {id:"b",text:"squaw",is_correct:false},
            {id:"c",text:"gnaw",is_correct:true},
            {id:"d",text:"prawn",is_correct:false}
          ]},
          { id: "13", prompt: "In 'Dawn found a flaw,' what does 'flaw' mean?", options: [
            {id:"a",text:"a defect or imperfection",is_correct:true},
            {id:"b",text:"a tool",is_correct:false},
            {id:"c",text:"a type of bird",is_correct:false},
            {id:"d",text:"a loud noise",is_correct:false}
          ]},
          { id: "14", prompt: "Which word means 'to write carelessly'?", options: [
            {id:"a",text:"scrawl",is_correct:true},
            {id:"b",text:"draw",is_correct:false},
            {id:"c",text:"sprawl",is_correct:false},
            {id:"d",text:"crawl",is_correct:false}
          ]},
          { id: "15", prompt: "Which word has the same vowel sound as 'saw'?", options: [
            {id:"a",text:"law",is_correct:true},
            {id:"b",text:"cat",is_correct:false},
            {id:"c",text:"cut",is_correct:false},
            {id:"d",text:"cot",is_correct:false}
          ]},
          { id: "16", prompt: "Which word ends with /n/ and has 'aw' = /»Ø/?", options: [
            {id:"a",text:"dawn",is_correct:true},
            {id:"b",text:"pawn",is_correct:false},
            {id:"c",text:"lawn",is_correct:false},
            {id:"d",text:"fawn",is_correct:false}
          ]},
          { id: "17", prompt: "What does 'yawn' mean?", options: [
            {id:"a",text:"to open the mouth wide from sleepiness",is_correct:true},
            {id:"b",text:"to shout",is_correct:false},
            {id:"c",text:"to whisper",is_correct:false},
            {id:"d",text:"to laugh",is_correct:false}
          ]},
          { id: "18", prompt: "Which word describes a grassy area around a house?", options: [
            {id:"a",text:"lawn",is_correct:true},
            {id:"b",text:"pawn",is_correct:false},
            {id:"c",text:"dawn",is_correct:false},
            {id:"d",text:"fawn",is_correct:false}
          ]},
          { id: "19", prompt: "Which word means 'physical strength or muscle'?", options: [
            {id:"a",text:"brawn",is_correct:true},
            {id:"b",text:"prawn",is_correct:false},
            {id:"c",text:"shawl",is_correct:false},
            {id:"d",text:"slaw",is_correct:false}
          ]},
          { id: "20", prompt: "Which word has 'aw' but does NOT say /»Ø/?", options: [
            {id:"a",text:"award",is_correct:true},
            {id:"b",text:"saw",is_correct:false},
            {id:"c",text:"law",is_correct:false},
            {id:"d",text:"jaw",is_correct:false}
          ]}
        ]
      };

      const TYPO_CORRECTIONS = [
        [/f resh/g, 'fresh'], [/p unch/g, 'punch'], [/slep t/g, 'slept'],
        [/crep t/g, 'crept'], [/p lant/g, 'plant'], [/p ath/g, 'path'],
        [/f roth/g, 'froth'], [/p eck/g, 'peck'], [/f luck/g, 'pluck'],
        [/p luck/g, 'pluck'], [/f ling/g, 'fling'], [/p ass/g, 'pass'],
        [/f uss/g, 'fuss'], [/sp ell/g, 'spell'], [/f uzz/g, 'fuzz'],
        [/thef t/g, 'theft'], [/thrif t/g, 'thrift'], [/dep th/g, 'depth'],
        [/fif th/g, 'fifth'], [/st ink/g, 'stink'], [/wr ink/g, 'wring'],
        [/f ault/g, 'fault'], [/f launt/g, 'flaunt'], [/p oint/g, 'point'], [/p ool/g, 'pool'], [/p ooch/g, 'pooch'], [/p lain/g, 'plain'],
        [/s our/g, 'sour'], [/f rown/g, 'frown'], [/c rown/g, 'crown'], [/d rown/g, 'drown']
      ];

      function renderWords() {
        document.getElementById('word-list').innerHTML =
          CHAPTER_CONFIG.contentWords.map(w => `<span class="word-item">${w}</span>`).join('');
      }

      function renderSentences() {
        const corrected = CHAPTER_CONFIG.sentences.map(s => {
          let text = s;
          TYPO_CORRECTIONS.forEach(([pattern, replacement]) => {
            text = text.replace(pattern, replacement);
          });
          return text;
        });
        document.getElementById('sentences').innerHTML =
          corrected.map(s => `<p>${s}</p>`).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [{ label: "Home", url: "../index.html", active: false }];
        for (let i = 0; i < 4; i++) {
          const c = currentChapter + i;
          const lessonNum = c + 1;
          if (c > MAX_CHAPTER) break;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${c}.html`,
            active: i === 0
          });
        }
        nav.innerHTML = buttons.map(b =>
          `<a href="${b.url}" class="chapter-btn ${b.active ? 'active' : ''}">${b.label}</a>`
        ).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};
        const baseSeed = currentChapter * 1000000 + (Date.now() % 1000000);

        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          const seed = baseSeed + parseInt(q.id, 10);
          const shuffledOpts = shuffleWithSeed([...q.options], seed);
          const correct = q.options.find(o => o.is_correct);
          window.quizCorrectMap[q.id] = correct.id;

          const optHtml = shuffledOpts.map((opt, idx) => {
            const letter = String.fromCharCode(65 + idx);
            return `<div class="option"><label><input type="radio" name="q${q.id}" value="${opt.id}" required> ${letter}. ${opt.text}</label></div>`;
          }).join('');

          return `<div class="question"><strong>${q.id}. ${q.prompt}</strong><div class="options">${optHtml}</div></div>`;
        }).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0, correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const ans = answers[i];
          const correctId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctId);
          const isCorrect = ans === correctId;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt} ‚Üí ‚úÖ ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt} ‚Üí ‚ùå Your answer: ${item.options.find(o => o.id === ans)?.text || '‚Äî'} | ‚úÖ ${correctOpt.text}`);
          }
        });

        const score = correctCount, total = 20, mastery = score >= 15;
        const timeOnTask = Math.floor((Date.now() - window.startTime) / 1000);
        const attempts = (parseInt(localStorage.getItem(`quiz_attempts_${currentChapter}`)) || 0) + 1;
        localStorage.setItem(`quiz_attempts_${currentChapter}`, attempts);
        localStorage.setItem(`mastery_${currentChapter}`, mastery ? '1' : '0');
        const studentName = localStorage.getItem('student_name') || '[Name]';

        let report = `*Mini OpenStax ‚Äî ${CHAPTER_CONFIG.title}*\nStudent: ${studentName}\nScore: ${score}/${total} (${Math.round(score/total*100)}%) ‚Äî ${mastery ? '‚úÖ MASTERED' : '‚ùå Needs Review'}\nTime: ${timeOnTask}s | Attempts: ${attempts}\n\n`;
        if (correctList.length) report += `‚úÖ CORRECT (${correctList.length}):\n${correctList.join('\n')}\n\n`;
        if (incorrectList.length) report += `‚ùå INCORRECT (${incorrectList.length}):\n${incorrectList.join('\n')}\n\n`;
        report += `Report generated via Mini OpenStax.`;

        localStorage.setItem(`saved_report_${currentChapter}_${Date.now()}`, report);

        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(report)}`;
        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}/${total}</h3>
            <p><strong>${mastery ? 'üéâ Excellent!' : score >= 10 ? 'Good!' : 'Keep practicing.'}</strong> ${
              mastery ? 'You‚Äôve mastered the concept!' :
              score >= 10 ? 'Review missed items.' : 'Practice this lesson again.'
            }</p>
            <p><strong>Time:</strong> ${timeOnTask}s | <strong>Attempts:</strong> ${attempts}</p>
            <a href="${url}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">
              üì≤ Send Report via WhatsApp
            </a>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const el = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(el ? el.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function initNamePrompt() {
        const saved = localStorage.getItem('student_name');
        const promptDiv = document.getElementById('student-name-prompt');
        const quizDiv = document.getElementById('quiz-container');
        const display = document.getElementById('name-display');
        const input = document.getElementById('student-name');
        const buttons = document.getElementById('name-buttons');

        if (saved) {
          promptDiv.style.display = 'block';
          quizDiv.style.display = 'none';
          display.innerHTML = `<p><strong>Current name:</strong> ${saved}</p>`;
          buttons.innerHTML = `
            <button type="button" class="btn" id="keep-btn">‚úÖ Keep This Name</button>
            <button type="button" class="btn btn-secondary" id="change-btn">‚úèÔ∏è Use a Different Name</button>
          `;
          document.getElementById('keep-btn').onclick = () => {
            promptDiv.style.display = 'none';
            quizDiv.style.display = 'block';
          };
          document.getElementById('change-btn').onclick = () => {
            display.style.display = 'none';
            input.style.display = 'block';
            buttons.innerHTML = `<button type="button" class="btn" id="save-new">üíæ Save and Start Quiz</button>`;
            input.value = '';
            input.focus();
            document.getElementById('save-new').onclick = () => {
              const name = input.value.trim();
              if (name) {
                localStorage.setItem('student_name', name);
                promptDiv.style.display = 'none';
                quizDiv.style.display = 'block';
              } else {
                alert("Please enter your name.");
                input.focus();
              }
            };
          };
        } else {
          promptDiv.style.display = 'block';
          quizDiv.style.display = 'none';
          display.style.display = 'none';
          input.style.display = 'block';
          buttons.innerHTML = `<button type="button" class="btn" id="save-first">üíæ Save and Start Quiz</button>`;
          document.getElementById('save-first').onclick = () => {
            const name = input.value.trim();
            if (name) {
              localStorage.setItem('student_name', name);
              promptDiv.style.display = 'none';
              quizDiv.style.display = 'block';
            } else {
              alert("Please enter your name.");
              input.focus();
            }
          };
        }
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
        initNamePrompt();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>        <h1 id="chapter-title">Lesson 103: Vowel Team aw</h1>
        <div class="lo-tags" id="lo-tags">LO PH103: Decode words with the vowel team aw (as in 'saw')</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words featuring the <strong>aw</strong> vowel team:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. All words are decodable from Lessons 2‚Äì103:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      const currentChapter = 102;    // chapter-102.html = Lesson 103
      const maxChapter = 150;        

      const CHAPTER_CONFIG = {
        title: "Lesson 103: Vowel Team aw",
        loTags: ["LO PH103: Decode words with the vowel team aw (as in 'saw')"],
        contentWords: [
          "paw", "jaw", "law", "saw", "caw", "raw", "claw", "flaw", "slaw", "draw", "straw", "thaw", "awl", "bawl", "brawl", "crawl", "drawl", "shawl", "scrawl", "sprawl", "dawn", "pawn", "lawn", "fawn", "yawn", "prawn", "drawn", "brawn", "hawk", "squawk", "squaw"
        ],
        sentences: [
          "1) A hawk can soar on the wind.",
          "2) A hawk can swoop down and catch a rat with a claw.",
          "3) Ann will sit and rub her jaw and think.",
          "4) The deer hid in the brush with her fawn.",
          "5) Dawn found a flaw in the seam of the dress.",
          "6) Jean can draw a sketch of her cat on a sketch pad.",
          "7) At the ranch, Ray must get up at dawn to milk the cow.",
          "8) The fox can crawl up and get near the hen.",
          "9) When the hen saw the fox, it let out a loud screech."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "What can a hawk do on the wind?", options: [{id:"a",text:"crawl",is_correct:false},{id:"b",text:"soar",is_correct:true},{id:"c",text:"yawn",is_correct:false},{id:"d",text:"thaw",is_correct:false}] },
          { id: "2", prompt: "What does a hawk use to catch a rat?", options: [{id:"a",text:"a jaw",is_correct:false},{id:"b",text:"a straw",is_correct:false},{id:"c",text:"a claw",is_correct:true},{id:"d",text:"a shawl",is_correct:false}] },
          { id: "3", prompt: "What part of her face did Ann rub?", options: [{id:"a",text:"her paw",is_correct:false},{id:"b",text:"her jaw",is_correct:true},{id:"c",text:"her lawn",is_correct:false},{id:"d",text:"her brawn",is_correct:false}] },
          { id: "4", prompt: "Where did the deer hide with her fawn?", options: [{id:"a",text:"in the brush",is_correct:true},{id:"b",text:"on the lawn",is_correct:false},{id:"c",text:"at the ranch",is_correct:false},{id:"d",text:"in the dress",is_correct:false}] },
          { id: "5", prompt: "What did Dawn find in the seam of the dress?", options: [{id:"a",text:"a prawn",is_correct:false},{id:"b",text:"a flaw",is_correct:true},{id:"c",text:"a straw",is_correct:false},{id:"d",text:"an awl",is_correct:false}] },
          { id: "6", prompt: "What can Jean draw a sketch of?", options: [{id:"a",text:"a hawk",is_correct:false},{id:"b",text:"a fawn",is_correct:false},{id:"c",text:"her cat",is_correct:true},{id:"d",text:"the lawn",is_correct:false}] },
          { id: "7", prompt: "What time must Ray get up at the ranch?", options: [{id:"a",text:"at noon",is_correct:false},{id:"b",text:"at dusk",is_correct:false},{id:"c",text:"at dawn",is_correct:true},{id:"d",text:"at night",is_correct:false}] },
          { id: "8", prompt: "Why does Ray get up early?", options: [{id:"a",text:"to draw a sketch",is_correct:false},{id:"b",text:"to milk the cow",is_correct:true},{id:"c",text:"to clean the lawn",is_correct:false},{id:"d",text:"to watch the hawk",is_correct:false}] },
          { id: "9", prompt: "How does the fox move to get near the hen?", options: [{id:"a",text:"it flies",is_correct:false},{id:"b",text:"it crawls",is_correct:true},{id:"c",text:"it brawls",is_correct:false},{id:"d",text:"it dawns",is_correct:false}] },
          { id: "10", prompt: "What did the hen do when it saw the fox?", options: [{id:"a",text:"it let out a loud screech",is_correct:true},{id:"b",text:"it began to yawn",is_correct:false},{id:"c",text:"it hid in a shawl",is_correct:false},{id:"d",text:"it ate some slaw",is_correct:false}] },
          { id: "11", prompt: "Which word is a baby deer?", options: [{id:"a",text:"fawn",is_correct:true},{id:"b",text:"pawn",is_correct:false},{id:"c",text:"lawn",is_correct:false},{id:"d",text:"dawn",is_correct:false}] },
          { id: "12", prompt: "Which word means to cry loudly?", options: [{id:"a",text:"bawl",is_correct:true},{id:"b",text:"drawl",is_correct:false},{id:"c",text:"crawl",is_correct:false},{id:"d",text:"brawl",is_correct:false}] },
          { id: "13", prompt: "Which word is a type of large bird?", options: [{id:"a",text:"hawk",is_correct:true},{id:"b",text:"prawn",is_correct:false},{id:"c",text:"awl",is_correct:false},{id:"d",text:"fawn",is_correct:false}] },
          { id: "14", prompt: "Which word means to melt?", options: [{id:"a",text:"thaw",is_correct:true},{id:"b",text:"straw",is_correct:false},{id:"c",text:"law",is_correct:false},{id:"d",text:"raw",is_correct:false}] },
          { id: "15", prompt: "Which word means not cooked?", options: [{id:"a",text:"raw",is_correct:true},{id:"b",text:"law",is_correct:false},{id:"c",text:"saw",is_correct:false},{id:"d",text:"caw",is_correct:false}] },
          { id: "16", prompt: "Complete the word: dr _ _ (to create a picture).", options: [{id:"a",text:"aw",is_correct:true},{id:"b",text:"ow",is_correct:false},{id:"c",text:"ou",is_correct:false},{id:"d",text:"oo",is_correct:false}] },
          { id: "17", prompt: "Which word is a tool for making holes?", options: [{id:"a",text:"awl",is_correct:true},{id:"b",text:"jaw",is_correct:false},{id:"c",text:"claw",is_correct:false},{id:"d",text:"paw",is_correct:false}] },
          { id: "18", prompt: "Where do you find grass in front of a house?", options: [{id:"a",text:"on the lawn",is_correct:true},{id:"b",text:"in the straw",is_correct:false},{id:"c",text:"on the shawl",is_correct:false},{id:"d",text:"in the brawn",is_correct:false}] },
          { id: "19", prompt: "Which word is the sound a crow makes?", options: [{id:"a",text:"caw",is_correct:true},{id:"b",text:"raw",is_correct:false},{id:"c",text:"saw",is_correct:false},{id:"d",text:"law",is_correct:false}] },
          { id: "20", prompt: "Which word means a noisy fight?", options: [{id:"a",text:"brawl",is_correct:true},{id:"b",text:"bawl",is_correct:false},{id:"c",text:"crawl",is_correct:false},{id:"d",text:"drawl",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => `
          <div class="question">
            <strong>${q.id}. ${q.prompt}</strong>
            <div class="options">
              ${q.options.map(opt => `
                <div class="option">
                  <label>
                    <input type="radio" name="q${q.id}" value="${opt.id}" required> ${opt.id.toUpperCase()}. ${opt.text}
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOpt = item.options.find(o => o.is_correct);
          const isCorrect = userAns === correctOpt.id;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 103*\nStudent: [Name]\nScore: ${score}\n\n`;
        const message = encodeURIComponent(summary + correctList.join('\n\n') + '\n\n' + incorrectList.join('\n\n'));
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      init();
    })();
  </script>
</body>
</html>
