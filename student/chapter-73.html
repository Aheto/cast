<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 74 ‚Äî ng/nk Patterns (-eng)"/>
  <title>Mini OpenStax ‚Äî Lesson 74: -eng Pattern</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 74: -eng Pattern</h1>
        <div class="lo-tags" id="lo-tags">LO PH74: Decode words with the -eng pattern (ng/nk family)</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <!-- üìö 5-BUTTON NAVIGATION BAR (Home + current + next 3 lessons) -->
    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words ending in the <strong>-eng</strong> pattern (part of the <em>ng/nk</em> family):</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. All words are decodable from Lessons 2‚Äì74:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      const currentChapter = 73;    // chapter-73.html = Lesson 74
      const maxChapter = 150;       // Update when adding more lessons

      const CHAPTER_CONFIG = {
        title: "Lesson 74: -eng Pattern",
        loTags: ["LO PH74: Decode words with the -eng pattern (ng/nk family)"],
        contentWords: [
          "length", "strength"
        ],
        sentences: [
          "The ox had the strength of ten men.",
          "Clint had strength and did not quit.",
          "Scott can swim the length of the pond.",
          "Greg cut one inch from the length of the shelf.",
          "Pam can spell well, but math is not her strength.",
          "The slot in the box was one inch in width and six in length."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word ends with the -eng pattern?", options: [{id:"a",text:"length",is_correct:true},{id:"b",text:"lent",is_correct:false},{id:"c",text:"lend",is_correct:false},{id:"d",text:"leg",is_correct:false}] },
          { id: "2", prompt: "Which is NOT a Lesson 74 word?", options: [{id:"a",text:"strength",is_correct:false},{id:"b",text:"length",is_correct:false},{id:"c",text:"beng",is_correct:true},{id:"d",text:"strength",is_correct:false}] },
          { id: "3", prompt: "What pattern ends 'strength'?", options: [{id:"a",text:"-ong",is_correct:false},{id:"b",text:"-eng",is_correct:true},{id:"c",text:"-ang",is_correct:false},{id:"d",text:"-ung",is_correct:false}] },
          { id: "4", prompt: "Which word means 'physical power or force'?", options: [{id:"a",text:"strength",is_correct:true},{id:"b",text:"length",is_correct:false},{id:"c",text:"width",is_correct:false},{id:"d",text:"height",is_correct:false}] },
          { id: "5", prompt: "How many letters in 'length'?", options: [{id:"a",text:"5",is_correct:true},{id:"b",text:"6",is_correct:false},{id:"c",text:"7",is_correct:false},{id:"d",text:"4",is_correct:false}] },
          { id: "6", prompt: "Which sentence uses only Lesson 74 words?", options: [{id:"a",text:"Clint had strength and did not quit.",is_correct:true},{id:"b",text:"Clint drove a car.",is_correct:false},{id:"c",text:"Clint sat on a mat.",is_correct:false},{id:"d",text:"Clint ran to a map.",is_correct:false}] },
          { id: "7", prompt: "Which word refers to how long something is from end to end?", options: [{id:"a",text:"length",is_correct:true},{id:"b",text:"strength",is_correct:false},{id:"c",text:"width",is_correct:false},{id:"d",text:"depth",is_correct:false}] },
          { id: "8", prompt: "What closes the vowel in 'length'?", options: [{id:"a",text:"Silent e",is_correct:false},{id:"b",text:"The -eng pattern",is_correct:true},{id:"c",text:"It's open",is_correct:false},{id:"d",text:"Double vowel",is_correct:false}] },
          { id: "9", prompt: "In 'Greg cut one inch from the length of the shelf', how many Lesson 74 words?", options: [{id:"a",text:"1",is_correct:true},{id:"b",text:"2",is_correct:false},{id:"c",text:"0",is_correct:false},{id:"d",text:"3",is_correct:false}] },
          { id: "10", prompt: "Which word means 'the quality of being strong'?", options: [{id:"a",text:"strength",is_correct:true},{id:"b",text:"length",is_correct:false},{id:"c",text:"breath",is_correct:false},{id:"d",text:"depth",is_correct:false}] },
          { id: "11", prompt: "Which word is often paired with 'width' and 'height'?", options: [{id:"a",text:"length",is_correct:true},{id:"b",text:"strength",is_correct:false},{id:"c",text:"depth",is_correct:false},{id:"d",text:"truth",is_correct:false}] },
          { id: "12", prompt: "Which word ends with -eng and describes muscular power?", options: [{id:"a",text:"strength",is_correct:true},{id:"b",text:"length",is_correct:false},{id:"c",text:"breath",is_correct:false},{id:"d",text:"health",is_correct:false}] },
          { id: "13", prompt: "Which sentence is from Lesson 74?", options: [{id:"a",text:"Scott can swim the length of the pond.",is_correct:true},{id:"b",text:"Scott sat on a mat.",is_correct:false},{id:"c",text:"Scott ran to a map.",is_correct:false},{id:"d",text:"Scott had a car.",is_correct:false}] },
          { id: "14", prompt: "How many consonants in 'strength'?", options: [{id:"a",text:"2",is_correct:false},{id:"b",text:"5",is_correct:true},{id:"c",text:"6",is_correct:false},{id:"d",text:"1",is_correct:false}] },
          { id: "15", prompt: "Which word is NOT a noun?", options: [{id:"a",text:"lengthen",is_correct:true},{id:"b",text:"length",is_correct:false},{id:"c",text:"strength",is_correct:false},{id:"d",text:"ox",is_correct:false}] },
          { id: "16", prompt: "What syllable type is 'length'?", options: [{id:"a",text:"Open",is_correct:false},{id:"b",text:"Magic E",is_correct:false},{id:"c",text:"Closed",is_correct:true},{id:"d",text:"R-controlled",is_correct:false}] },
          { id: "17", prompt: "Which word describes the capacity to endure or resist?", options: [{id:"a",text:"strength",is_correct:true},{id:"b",text:"length",is_correct:false},{id:"c",text:"breadth",is_correct:false},{id:"d",text:"health",is_correct:false}] },
          { id: "18", prompt: "Which word might complete: 'The ox had great ___'?", options: [{id:"a",text:"strength",is_correct:true},{id:"b",text:"length",is_correct:false},{id:"c",text:"width",is_correct:false},{id:"d",text:"depth",is_correct:false}] },
          { id: "19", prompt: "Which word appears in both 'length of the pond' and 'length of the shelf'?", options: [{id:"a",text:"length",is_correct:true},{id:"b",text:"pond",is_correct:false},{id:"c",text:"shelf",is_correct:false},{id:"d",text:"six",is_correct:false}] },
          { id: "20", prompt: "What phonics pattern is taught in Lesson 74?", options: [{id:"a",text:"-ong",is_correct:false},{id:"b",text:"-eng",is_correct:true},{id:"c",text:"-ang",is_correct:false},{id:"d",text:"-ung",is_correct:false}] }
        ]
      };

      // Render word list
      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      // Render sentences
      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      // ‚úÖ UNLIMITED NAVIGATION
      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      // Render quiz
      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => `
          <div class="question">
            <strong>${q.id}. ${q.prompt}</strong>
            <div class="options">
              ${q.options.map(opt => `
                <div class="option">
                  <label>
                    <input type="radio" name="q${q.id}" value="${opt.id}" required> ${opt.id.toUpperCase()}. ${opt.text}
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }

      // WhatsApp feedback
      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOpt = item.options.find(o => o.is_correct);
          const isCorrect = userAns === correctOpt.id;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20}`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 74*\nStudent: [Name]\nScore: ${score}\n\n`;
        const correctStr = correctList.length ? '‚úÖ CORRECT:\n' + correctList.join('\n\n') + '\n\n' : '';
        const incorrectStr = incorrectList.length ? '‚ùå INCORRECT:\n' + incorrectList.join('\n\n') : '';
        const message = encodeURIComponent(summary + correctStr + incorrectStr + `\nReport generated via Mini OpenStax. Share with instructor: https://wa.me/${CHAPTER_CONFIG.whatsappNumber}`);
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><strong>${correctCount >= 15 ? 'Excellent! You‚Äôve mastered the -eng pattern!' : correctCount >= 10 ? 'Good! Review missed items.' : 'Practice Lesson 74 words again.'}</strong></p>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
