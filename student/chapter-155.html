<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 156 ‚Äî Magic E Syllables (Long a)"/>
  <title>Mini OpenStax ‚Äî Lesson 156: Magic E Pattern (-a_e)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 156: Magic E Syllables (Long a)</h1>
        <div class="lo-tags" id="lo-tags">LO PH156: Decode words with the VCe pattern where 'a' makes the long /ƒÅ/ sound.</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List: The Long 'a' Sound</h2>
        <p>In these words, the silent <strong>e</strong> at the end tells the <strong>a</strong> to say its name (the long /ƒÅ/ sound):</p>
        
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. Pay attention to how the final 'e' changes the sound of the vowel 'a':</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Test your knowledge of Magic E words from Lesson 156.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      const currentChapter = 155; // chapter-155.html = Lesson 156
      const maxChapter = 160;

      const CHAPTER_CONFIG = {
        title: "Lesson 156: Magic E Syllables (Long a)",
        loTags: ["LO PH156: Decode words with the VCe pattern where 'a' makes the long /ƒÅ/ sound."],
        contentWords: [
          "bake", "cake", "fake", "lake", "make", "rake", "take", "wake", "Jake", "brake", "flake", "snake", "shake", "male", "pale", "sale", "tale", "scale", "stale", "whale", "made", "wade", "blade", "grade", "trade", "shade", "ape", "cape", "tape", "grape", "shape", "scrape", "safe"
        ],
        sentences: [
          "1) Jake can make a vanilla milk shake.",
          "2) Gail can bake an excellent fudge cake.",
          "3) Mitch must rake up the leaves on the lawn.",
          "4) Sally will be in the fifth grade next year.",
          "5) Jake made an apology for his foolish comment.",
          "6) The novel is a tale about a prince and a princess.",
          "7) The boys sailed once around the lake in a sailboat.",
          "8) Nancy was still pale from her stay in the hospital.",
          "9) The man must fix the brake on his truck to make it safe.",
          "10) At the picnic, the family sat in the shade of a big oak tree."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word has a long 'a' sound?", options: [{id:"a",text:"lake",is_correct:true},{id:"b",text:"lack",is_correct:false},{id:"c",text:"lick",is_correct:false},{id:"d",text:"lock",is_correct:false}] },
          { id: "2", prompt: "What can Jake make?", options: [{id:"a",text:"a milk shake",is_correct:true},{id:"b",text:"a rake",is_correct:false},{id:"c",text:"a snake",is_correct:false},{id:"d",text:"a scale",is_correct:false}] },
          { id: "3", prompt: "Which is a giant sea mammal?", options: [{id:"a",text:"whale",is_correct:true},{id:"b",text:"male",is_correct:false},{id:"c",text:"stale",is_correct:false},{id:"d",text:"pale",is_correct:false}] },
          { id: "4", prompt: "What kind of cake can Gail bake?", options: [{id:"a",text:"fudge cake",is_correct:true},{id:"b",text:"grape cake",is_correct:false},{id:"c",text:"stale cake",is_correct:false},{id:"d",text:"fake cake",is_correct:false}] },
          { id: "5", prompt: "What must Mitch do to the leaves?", options: [{id:"a",text:"rake them up",is_correct:true},{id:"b",text:"wade in them",is_correct:false},{id:"c",text:"trade them",is_correct:false},{id:"d",text:"bake them",is_correct:false}] },
          { id: "6", prompt: "Which word means bread that is old and hard?", options: [{id:"a",text:"stale",is_correct:true},{id:"b",text:"scale",is_correct:false},{id:"c",text:"shale",is_correct:false},{id:"d",text:"whale",is_correct:false}] },
          { id: "7", prompt: "What grade is Sally in?", options: [{id:"a",text:"fifth grade",is_correct:true},{id:"b",text:"first grade",is_correct:false},{id:"c",text:"fourth grade",is_correct:false},{id:"d",text:"third grade",is_correct:false}] },
          { id: "8", prompt: "What did the man fix on his truck?", options: [{id:"a",text:"the brake",is_correct:true},{id:"b",text:"the blade",is_correct:false},{id:"c",text:"the shape",is_correct:false},{id:"d",text:"the tape",is_correct:false}] },
          { id: "9", prompt: "What is a 'tale'?", options: [{id:"a",text:"a story",is_correct:true},{id:"b",text:"a tail on a dog",is_correct:false},{id:"c",text:"a fruit",is_correct:false},{id:"d",text:"a tool",is_correct:false}] },
          { id: "10", prompt: "Where did the family sit at the picnic?", options: [{id:"a",text:"in the shade",is_correct:true},{id:"b",text:"on a snake",is_correct:false},{id:"c",text:"in the lake",is_correct:false},{id:"d",text:"on a rake",is_correct:false}] },
          { id: "11", prompt: "Which word is an animal?", options: [{id:"a",text:"snake",is_correct:true},{id:"b",text:"shake",is_correct:false},{id:"c",text:"flake",is_correct:false},{id:"d",text:"brake",is_correct:false}] },
          { id: "12", prompt: "What happens to the 'e' in 'make'?", options: [{id:"a",text:"It is silent",is_correct:true},{id:"b",text:"It says /ee/",is_correct:false},{id:"c",text:"It says /eh/",is_correct:false},{id:"d",text:"It is the loud vowel",is_correct:false}] },
          { id: "13", prompt: "Which word means to walk through water?", options: [{id:"a",text:"wade",is_correct:true},{id:"b",text:"made",is_correct:false},{id:"c",text:"blade",is_correct:false},{id:"d",text:"trade",is_correct:false}] },
          { id: "14", prompt: "Which word means to scrape or cut slightly?", options: [{id:"a",text:"scrape",is_correct:true},{id:"b",text:"shape",is_correct:false},{id:"c",text:"grape",is_correct:false},{id:"d",text:"tape",is_correct:false}] },
          { id: "15", prompt: "In 'safe', what sound does 'a' make?", options: [{id:"a",text:"Long /ƒÅ/",is_correct:true},{id:"b",text:"Short /ƒÉ/",is_correct:false},{id:"c",text:"Silent",is_correct:false},{id:"d",text:"/aw/",is_correct:false}] },
          { id: "16", prompt: "How many times did the boys sail the lake?", options: [{id:"a",text:"once",is_correct:true},{id:"b",text:"twice",is_correct:false},{id:"c",text:"three times",is_correct:false},{id:"d",text:"ten times",is_correct:false}] },
          { id: "17", prompt: "Which word is a small fruit?", options: [{id:"a",text:"grape",is_correct:true},{id:"b",text:"shape",is_correct:false},{id:"c",text:"tape",is_correct:false},{id:"d",text:"cape",is_correct:false}] },
          { id: "18", prompt: "Why was Nancy pale?", options: [{id:"a",text:"hospital stay",is_correct:true},{id:"b",text:"she was cold",is_correct:false},{id:"c",text:"she was lost",is_correct:false},{id:"d",text:"the sun",is_correct:false}] },
          { id: "19", prompt: "Which word refers to a sharp part of a knife?", options: [{id:"a",text:"blade",is_correct:true},{id:"b",text:"wade",is_correct:false},{id:"c",text:"grade",is_correct:false},{id:"d",text:"shade",is_correct:false}] },
          { id: "20", prompt: "What is the pattern in this lesson?", options: [{id:"a",text:"Vowel-Consonant-e",is_correct:true},{id:"b",text:"Closed syllable",is_correct:false},{id:"c",text:"Vowel team",is_correct:false},{id:"d",text:"R-controlled",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => `
          <div class="question">
            <strong>${q.id}. ${q.prompt}</strong>
            <div class="options">
              ${q.options.map(opt => `
                <div class="option">
                  <label>
                    <input type="radio" name="q${q.id}" value="${opt.id}" required> ${opt.id.toUpperCase()}. ${opt.text}
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOpt = item.options.find(o => o.is_correct);
          const isCorrect = userAns === correctOpt.id;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 156*\nStudent: [Name]\nScore: ${score}\n\n`;
        const message = encodeURIComponent(summary + correctList.join('\n\n') + '\n\n' + incorrectList.join('\n\n'));
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      init();
    })();
  </script>
</body>
</html>
