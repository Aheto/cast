<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 89: ea Vowel Team Pattern Continued"/>
  <title>Mini OpenStax ‚Äî Lesson 89: ea Vowel Team Pattern (Part 4)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn {
      background: #28a745; color: white; border: none; padding: 0.5rem 1rem;
      border-radius: 4px; cursor: pointer; font-size: 1rem; margin-right: 0.5rem;
    }
    .btn:hover { background: #218838; }
    .btn-secondary { background: #6c757d; }
    .btn-secondary:hover { background: #5a6268; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 89: ea Vowel Team (Part 4)</h1>
        <div class="lo-tags" id="lo-tags">LO PH89: Decode complex words with the /ea/ vowel team</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Target words with the <strong>ea</strong> vowel team:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div id="student-name-prompt" class="section" style="display:none;">
        <h2>üë§ Your Name</h2>
        <div id="name-display"></div>
        <input type="text" id="student-name" placeholder="Enter your name" maxlength="30"
          style="padding:0.5rem;font-size:1rem;width:100%;margin:0.5rem 0;display:none;">
        <div id="name-buttons"></div>
      </div>

      <div class="quiz" id="quiz-container" style="display:none;">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';
      window.startTime = Date.now();

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      const currentChapter = 88; // chapter-88.html = Lesson 89
      const maxChapter = 261;
      const WHATSAPP_NUMBER = "233257320201";

      const CHAPTER_CONFIG = {
        title: "Lesson 89: ea Vowel Team (Part 4)",
        loTags: ["LO PH89: Decode complex words with the /ea/ vowel team"],
        contentWords: [
          "pea", "peak", "peal", "peach", "preach", "plea", "plead", "pleat",
          "read", "real", "ream", "reap", "rear", "reach", "tea", "teak",
          "team", "tear", "teach", "treat", "tweak", "zeal", "weak", "wean",
          "wheat", "year", "yeast", "veal"
        ],
        sentences: [
          "1) Cliff was sick and felt weak.",
          "2) Neal sat in a rear seat on the bus.",
          "3) Beth says her team can beat their team.",
          "4) Ann will help Jeff and teach him to read.",
          "5) A wisp of steam went up from the hot cup of tea.",
          "6) Bess will plead with Mom to get the doll at the shop.",
          "7) Each year, the men on the ranch reap the crop of wheat.",
          "8) Jill got a deep cut on her heel, but she did not shed a tear.",
          "9) Max can pluck a sweet peach from the branch of a peach tree.",
          "10) Frank must plod up the path to reach the peak of the steep hill."
        ],
        assessmentItems: [
          { id: "1", prompt: "How did Cliff feel because he was sick?", options: [{id:"a",text:"weak",is_correct:true},{id:"b",text:"real",is_correct:false},{id:"c",text:"zeal",is_correct:false},{id:"d",text:"teak",is_correct:false}]},
          { id: "2", prompt: "Where did Neal sit on the bus?", options: [{id:"a",text:"in a rear seat",is_correct:true},{id:"b",text:"at the peak",is_correct:false},{id:"c",text:"on a ream",is_correct:false},{id:"d",text:"by the tea",is_correct:false}]},
          { id: "3", prompt: "What does Beth say about her team?", options: [{id:"a",text:"they can beat the other team",is_correct:true},{id:"b",text:"they are weak",is_correct:false},{id:"c",text:"they reap wheat",is_correct:false},{id:"d",text:"they teach reading",is_correct:false}]},
          { id: "4", prompt: "What will Ann teach Jeff to do?", options: [{id:"a",text:"read",is_correct:true},{id:"b",text:"preach",is_correct:false},{id:"c",text:"wean",is_correct:false},{id:"d",text:"tweak",is_correct:false}]},
          { id: "5", prompt: "What came out of the hot cup of tea?", options: [{id:"a",text:"a wisp of steam",is_correct:true},{id:"b",text:"a yeast",is_correct:false},{id:"c",text:"a peach",is_correct:false},{id:"d",text:"a pleat",is_correct:false}]},
          { id: "6", prompt: "Why will Bess plead with Mom?", options: [{id:"a",text:"to get a doll",is_correct:true},{id:"b",text:"to get some wheat",is_correct:false},{id:"c",text:"to reach the peak",is_correct:false},{id:"d",text:"to help Jeff",is_correct:false}]},
          { id: "7", prompt: "What do the men on the ranch do each year?", options: [{id:"a",text:"reap the crop of wheat",is_correct:true},{id:"b",text:"teach Jeff to read",is_correct:false},{id:"c",text:"pluck a peach",is_correct:false},{id:"d",text:"sit in the rear",is_correct:false}]},
          { id: "8", prompt: "What did Jill NOT do after getting a cut?", options: [{id:"a",text:"shed a tear",is_correct:true},{id:"b",text:"plead with Mom",is_correct:false},{id:"c",text:"eat veal",is_correct:false},{id:"d",text:"beat the team",is_correct:false}]},
          { id: "9", prompt: "Where does Max get the peach from?", options: [{id:"a",text:"the branch of a peach tree",is_correct:true},{id:"b",text:"the rear seat",is_correct:false},{id:"c",text:"a ream of paper",is_correct:false},{id:"d",text:"the peak of the hill",is_correct:false}]},
          { id: "10", prompt: "Where must Frank reach after plodding up the path?", options: [{id:"a",text:"the peak of the steep hill",is_correct:true},{id:"b",text:"the cup of tea",is_correct:false},{id:"c",text:"the wheat crop",is_correct:false},{id:"d",text:"the ranch",is_correct:false}]},
          { id: "11", prompt: "Which word is a fruit that grows on a tree?", options: [{id:"a",text:"peach",is_correct:true},{id:"b",text:"wheat",is_correct:false},{id:"c",text:"yeast",is_correct:false},{id:"d",text:"veal",is_correct:false}]},
          { id: "12", prompt: "Which word means a group of people working together?", options: [{id:"a",text:"team",is_correct:true},{id:"b",text:"tear",is_correct:false},{id:"c",text:"teak",is_correct:false},{id:"d",text:"tea",is_correct:false}]},
          { id: "13", prompt: "Which word means an urgent request?", options: [{id:"a",text:"plea",is_correct:true},{id:"b",text:"peal",is_correct:false},{id:"c",text:"pea",is_correct:false},{id:"d",text:"peak",is_correct:false}]},
          { id: "14", prompt: "Which word means to gather or harvest a crop?", options: [{id:"a",text:"reap",is_correct:true},{id:"b",text:"read",is_correct:false},{id:"c",text:"real",is_correct:false},{id:"d",text:"ream",is_correct:false}]},
          { id: "15", prompt: "Which word is a grain used to make bread?", options: [{id:"a",text:"wheat",is_correct:true},{id:"b",text:"weak",is_correct:false},{id:"c",text:"wean",is_correct:false},{id:"d",text:"yeast",is_correct:false}]},
          { id: "16", prompt: "Which word means 365 days?", options: [{id:"a",text:"year",is_correct:true},{id:"b",text:"yeast",is_correct:false},{id:"c",text:"zeal",is_correct:false},{id:"d",text:"veal",is_correct:false}]},
          { id: "17", prompt: "Which word means a fold in cloth?", options: [{id:"a",text:"pleat",is_correct:true},{id:"b",text:"plead",is_correct:false},{id:"c",text:"plea",is_correct:false},{id:"d",text:"peach",is_correct:false}]},
          { id: "18", prompt: "Which word refers to a very strong wood?", options: [{id:"a",text:"teak",is_correct:true},{id:"b",text:"tea",is_correct:false},{id:"c",text:"team",is_correct:false},{id:"d",text:"teach",is_correct:false}]},
          { id: "19", prompt: "Which word means a loud ringing of bells?", options: [{id:"a",text:"peal",is_correct:true},{id:"b",text:"peak",is_correct:false},{id:"c",text:"pea",is_correct:false},{id:"d",text:"peach",is_correct:false}]},
          { id: "20", prompt: "Which word means meat from a calf?", options: [{id:"a",text:"veal",is_correct:true},{id:"b",text:"yeast",is_correct:false},{id:"c",text:"wheat",is_correct:false},{id:"d",text:"year",is_correct:false}]}
        ]
      };

      function renderWords() {
        document.getElementById('word-list').innerHTML =
          CHAPTER_CONFIG.contentWords.map(w => `<span class="word-item">${w}</span>`).join('');
      }

      function renderSentences() {
        document.getElementById('sentences').innerHTML =
          CHAPTER_CONFIG.sentences.map(s => `<p>${s}</p>`).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [{ label: "Home", url: "../index.html", active: false }];
        for (let i = 0; i < 4; i++) {
          const c = currentChapter + i;
          const lessonNum = c + 1;
          if (c > maxChapter) break;
          buttons.push({ label: `Lesson ${lessonNum}`, url: `chapter-${c}.html`, active: i === 0 });
        }
        nav.innerHTML = buttons.map(b => `<a href="${b.url}" class="chapter-btn ${b.active ? 'active' : ''}">${b.label}</a>`).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          const opts = shuffle([...q.options]);
          const correct = q.options.find(o => o.is_correct);
          window.quizCorrectMap[q.id] = correct.id;
          const optHtml = opts.map((o, i) => {
            const L = String.fromCharCode(65 + i);
            return `<div class="option"><label><input type="radio" name="q${q.id}" value="${o.id}" required> ${L}. ${o.text}</label></div>`;
          }).join('');
          return `<div class="question"><strong>${q.id}. ${q.prompt}</strong><div class="options">${optHtml}</div></div>`;
        }).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0, correctList = [], incorrectList = [];
        items.forEach((item, i) => {
          const ans = answers[i];
          const correctId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctId);
          if (ans === correctId) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt} ‚Üí ‚úÖ ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt} ‚Üí ‚ùå Your answer: ${item.options.find(o => o.id === ans)?.text || '‚Äî'} | ‚úÖ ${correctOpt.text}`);
          }
        });

        const score = correctCount, mastery = score >= 15;
        const timeOnTask = Math.floor((Date.now() - window.startTime) / 1000);
        const attemptsKey = `quiz_attempts_${currentChapter}`;
        const attempts = (parseInt(localStorage.getItem(attemptsKey)) || 0) + 1;
        localStorage.setItem(attemptsKey, attempts);
        localStorage.setItem(`mastery_${currentChapter}`, mastery ? '1' : '0');
        const studentName = localStorage.getItem('student_name') || '[Name]';

        let report = `*Mini OpenStax ‚Äî ${CHAPTER_CONFIG.title}*\nStudent: ${studentName}\nScore: ${score}/20 (${Math.round(score/20*100)}%) ‚Äî ${mastery ? '‚úÖ MASTERED' : '‚ùå Needs Review'}\nTime: ${timeOnTask}s | Attempts: ${attempts}\n\n`;
        if (correctList.length) report += `‚úÖ CORRECT:\n${correctList.join('\n')}\n\n`;
        if (incorrectList.length) report += `‚ùå INCORRECT:\n${incorrectList.join('\n')}\n\n`;
        report += `Report generated via Mini OpenStax.`;

        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(report)}`;
        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}/20</h3>
            <p><strong>${mastery ? 'üéâ Excellent!' : 'Keep practicing.'}</strong></p>
            <p>Time: ${timeOnTask}s | Attempts: ${attempts}</p>
            <a href="${url}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report via WhatsApp</a>
          </div>`;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const el = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(el ? el.value : null);
          }
          if (answers.includes(null)) { alert("Please answer all questions."); return; }
          showFeedback(answers);
        });
      }

      function initNamePrompt() {
        const saved = localStorage.getItem('student_name');
        const promptDiv = document.getElementById('student-name-prompt');
        const quizDiv = document.getElementById('quiz-container');
        const display = document.getElementById('name-display');
        const input = document.getElementById('student-name');
        const buttons = document.getElementById('name-buttons');

        promptDiv.style.display = 'block';
        if (saved) {
          display.innerHTML = `<p><strong>Current name:</strong> ${saved}</p>`;
          buttons.innerHTML = `<button type="button" class="btn" id="keep-btn">‚úÖ Keep This Name</button> <button type="button" class="btn btn-secondary" id="change-btn">‚úèÔ∏è Change</button>`;
          document.getElementById('keep-btn').onclick = () => { promptDiv.style.display = 'none'; quizDiv.style.display = 'block'; };
          document.getElementById('change-btn').onclick = () => { display.style.display = 'none'; input.style.display = 'block'; input.value = ''; input.focus(); buttons.innerHTML = `<button type="button" class="btn" id="save-new">üíæ Save & Start</button>`; document.getElementById('save-new').onclick = saveName; };
        } else {
          display.style.display = 'none'; input.style.display = 'block'; buttons.innerHTML = `<button type="button" class="btn" id="save-first">üíæ Save & Start</button>`; document.getElementById('save-first').onclick = saveName;
        }

        function saveName() {
          const name = input.value.trim();
          if (name) { localStorage.setItem('student_name', name); promptDiv.style.display = 'none'; quizDiv.style.display = 'block'; }
          else { alert("Please enter your name."); }
        }
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation(); renderWords(); renderSentences(); renderQuiz(); setupQuizListeners(); initNamePrompt();
      }

      init();
    })();
  </script>
</body>
</html>
