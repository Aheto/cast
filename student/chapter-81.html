<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 82: ee Vowel Team Pattern"/>
  <title>Mini OpenStax ‚Äî Lesson 82: ee Vowel Team Pattern</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn {
      background: #28a745; color: white; border: none; padding: 0.5rem 1rem;
      border-radius: 4px; cursor: pointer; font-size: 1rem; margin-right: 0.5rem;
    }
    .btn:hover { background: #218838; }
    .btn-secondary { background: #6c757d; }
    .btn-secondary:hover { background: #5a6268; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 82: ee Vowel Team</h1>
        <div class="lo-tags" id="lo-tags">LO PH82: Decode words with the /ee/ vowel team</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Target words with the <strong>ee</strong> vowel team:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div id="student-name-prompt" class="section" style="display:none;">
        <h2>üë§ Your Name</h2>
        <div id="name-display"></div>
        <input type="text" id="student-name" placeholder="Enter your name" maxlength="30"
          style="padding:0.5rem;font-size:1rem;width:100%;margin:0.5rem 0;display:none;">
        <div id="name-buttons"></div>
      </div>

      <div class="quiz" id="quiz-container" style="display:none;">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';
      window.startTime = Date.now();

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      const currentChapter = 81; // chapter-81.html = Lesson 82
      const maxChapter = 261;
      const WHATSAPP_NUMBER = "233257320201";

      const CHAPTER_CONFIG = {
        title: "Lesson 82: ee Vowel Team",
        loTags: ["LO PH82: Decode words with the /ee/ vowel team"],
        contentWords: [
          "see", "seed", "seek", "seem", "seen", "seep", "sheep", "sheet",
          "sheen", "sheer", "sneer", "sleep", "sleet", "sleek", "eel", "steel",
          "steep", "steer", "steed", "street", "speed", "speech", "spree",
          "screen", "screech", "sweep", "sweet"
        ],
        sentences: [
          "1) The plum was fresh and sweet.",
          "2) The ranch had a flock of sheep.",
          "3) Jack will plant a seed in the pot.",
          "4) Did the speech seem long and dull?",
          "5) Bess will sleep on a bunk bed at camp.",
          "6) Bess had a quilt and a sheet on the bed.",
          "7) Mitch can steer the truck up the street.",
          "8) Mitch must not speed in the truck.",
          "9) Scott must sweep up the mess he left on the rug.",
          "10) Rick had a sleek steel sled. The sled can speed on a steep hill."
        ],
        assessmentItems: [
          { id: "1", prompt: "What word describes the plum in sentence 1?", options: [{id:"a",text:"sweet",is_correct:true},{id:"b",text:"steep",is_correct:false},{id:"c",text:"sleek",is_correct:false},{id:"d",text:"sheet",is_correct:false}]},
          { id: "2", prompt: "What did the ranch have a flock of?", options: [{id:"a",text:"sheep",is_correct:true},{id:"b",text:"steeds",is_correct:false},{id:"c",text:"eels",is_correct:false},{id:"d",text:"seeds",is_correct:false}]},
          { id: "3", prompt: "Where will Jack plant a seed?", options: [{id:"a",text:"in the pot",is_correct:true},{id:"b",text:"on the street",is_correct:false},{id:"c",text:"on the rug",is_correct:false},{id:"d",text:"in the truck",is_correct:false}]},
          { id: "4", prompt: "What did Bess have on her bed besides a quilt?", options: [{id:"a",text:"a sheet",is_correct:true},{id:"b",text:"a screen",is_correct:false},{id:"c",text:"a seed",is_correct:false},{id:"d",text:"a plum",is_correct:false}]},
          { id: "5", prompt: "What must Mitch NOT do in the truck?", options: [{id:"a",text:"speed",is_correct:true},{id:"b",text:"steer",is_correct:false},{id:"c",text:"sweep",is_correct:false},{id:"d",text:"sleep",is_correct:false}]},
          { id: "6", prompt: "What kind of sled did Rick have?", options: [{id:"a",text:"sleek steel sled",is_correct:true},{id:"b",text:"steep sweet sled",is_correct:false},{id:"c",text:"green sheet sled",is_correct:false},{id:"d",text:"slow wood sled",is_correct:false}]},
          { id: "7", prompt: "What must Scott sweep up?", options: [{id:"a",text:"the mess",is_correct:true},{id:"b",text:"the seeds",is_correct:false},{id:"c",text:"the quilt",is_correct:false},{id:"d",text:"the sheep",is_correct:false}]},
          { id: "8", prompt: "Where can Rick's sled speed?", options: [{id:"a",text:"on a steep hill",is_correct:true},{id:"b",text:"up the street",is_correct:false},{id:"c",text:"on the rug",is_correct:false},{id:"d",text:"in the pot",is_correct:false}]},
          { id: "9", prompt: "Which word means to look for something?", options: [{id:"a",text:"seek",is_correct:true},{id:"b",text:"seep",is_correct:false},{id:"c",text:"seem",is_correct:false},{id:"d",text:"seen",is_correct:false}]},
          { id: "10", prompt: "Which word means a long-snouted fish-like animal?", options: [{id:"a",text:"eel",is_correct:true},{id:"b",text:"steed",is_correct:false},{id:"c",text:"sheen",is_correct:false},{id:"d",text:"sleet",is_correct:false}]},
          { id: "11", prompt: "To guide a vehicle is to ____ it.", options: [{id:"a",text:"steer",is_correct:true},{id:"b",text:"sneer",is_correct:false},{id:"c",text:"sweep",is_correct:false},{id:"d",text:"sleep",is_correct:false}]},
          { id: "12", prompt: "Frozen rain is called ____.", options: [{id:"a",text:"sleet",is_correct:true},{id:"b",text:"sheet",is_correct:false},{id:"c",text:"steel",is_correct:false},{id:"d",text:"steep",is_correct:false}]},
          { id: "13", prompt: "A loud, high cry is a ____.", options: [{id:"a",text:"screech",is_correct:true},{id:"b",text:"speech",is_correct:false},{id:"c",text:"spree",is_correct:false},{id:"d",text:"screen",is_correct:false}]},
          { id: "14", prompt: "Which word is a synonym for a horse?", options: [{id:"a",text:"steed",is_correct:true},{id:"b",text:"steel",is_correct:false},{id:"c",text:"sheer",is_correct:false},{id:"d",text:"seen",is_correct:false}]},
          { id: "15", prompt: "What is a talk given to an audience?", options: [{id:"a",text:"speech",is_correct:true},{id:"b",text:"spree",is_correct:false},{id:"c",text:"screech",is_correct:false},{id:"d",text:"street",is_correct:false}]},
          { id: "16", prompt: "Liquid that leaks slowly through a crack is said to ____.", options: [{id:"a",text:"seep",is_correct:true},{id:"b",text:"sweep",is_correct:false},{id:"c",text:"seek",is_correct:false},{id:"d",text:"seen",is_correct:false}]},
          { id: "17", prompt: "A surface that is very shiny has a ____.", options: [{id:"a",text:"sheen",is_correct:true},{id:"b",text:"sheet",is_correct:false},{id:"c",text:"sheer",is_correct:false},{id:"d",text:"seed",is_correct:false}]},
          { id: "18", prompt: "To look with a mocking or hateful smile is to ____.", options: [{id:"a",text:"sneer",is_correct:true},{id:"b",text:"steer",is_correct:false},{id:"c",text:"seem",is_correct:false},{id:"d",text:"see",is_correct:false}]},
          { id: "19", prompt: "Complete the sentence: 'Did the speech ___ long?'", options: [{id:"a",text:"seem",is_correct:true},{id:"b",text:"seen",is_correct:false},{id:"c",text:"seed",is_correct:false},{id:"d",text:"seek",is_correct:false}]},
          { id: "20", prompt: "What material was Rick's sled made of?", options: [{id:"a",text:"steel",is_correct:true},{id:"b",text:"sheet",is_correct:false},{id:"c",text:"pot",is_correct:false},{id:"d",text:"plum",is_correct:false}]}
        ]
      };

      function renderWords() {
        document.getElementById('word-list').innerHTML =
          CHAPTER_CONFIG.contentWords.map(w => `<span class="word-item">${w}</span>`).join('');
      }

      function renderSentences() {
        document.getElementById('sentences').innerHTML =
          CHAPTER_CONFIG.sentences.map(s => `<p>${s}</p>`).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [{ label: "Home", url: "../index.html", active: false }];
        for (let i = 0; i < 4; i++) {
          const c = currentChapter + i;
          const lessonNum = c + 1;
          if (c > maxChapter) break;
          buttons.push({ label: `Lesson ${lessonNum}`, url: `chapter-${c}.html`, active: i === 0 });
        }
        nav.innerHTML = buttons.map(b => `<a href="${b.url}" class="chapter-btn ${b.active ? 'active' : ''}">${b.label}</a>`).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          const opts = shuffle([...q.options]);
          const correct = q.options.find(o => o.is_correct);
          window.quizCorrectMap[q.id] = correct.id;
          const optHtml = opts.map((o, i) => {
            const L = String.fromCharCode(65 + i);
            return `<div class="option"><label><input type="radio" name="q${q.id}" value="${o.id}" required> ${L}. ${o.text}</label></div>`;
          }).join('');
          return `<div class="question"><strong>${q.id}. ${q.prompt}</strong><div class="options">${optHtml}</div></div>`;
        }).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0, correctList = [], incorrectList = [];
        items.forEach((item, i) => {
          const ans = answers[i];
          const correctId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctId);
          if (ans === correctId) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt} ‚Üí ‚úÖ ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt} ‚Üí ‚ùå Your answer: ${item.options.find(o => o.id === ans)?.text || '‚Äî'} | ‚úÖ ${correctOpt.text}`);
          }
        });

        const score = correctCount, mastery = score >= 15;
        const timeOnTask = Math.floor((Date.now() - window.startTime) / 1000);
        const attemptsKey = `quiz_attempts_${currentChapter}`;
        const attempts = (parseInt(localStorage.getItem(attemptsKey)) || 0) + 1;
        localStorage.setItem(attemptsKey, attempts);
        localStorage.setItem(`mastery_${currentChapter}`, mastery ? '1' : '0');
        const studentName = localStorage.getItem('student_name') || '[Name]';

        let report = `*Mini OpenStax ‚Äî ${CHAPTER_CONFIG.title}*\nStudent: ${studentName}\nScore: ${score}/20 (${Math.round(score/20*100)}%) ‚Äî ${mastery ? '‚úÖ MASTERED' : '‚ùå Needs Review'}\nTime: ${timeOnTask}s | Attempts: ${attempts}\n\n`;
        if (correctList.length) report += `‚úÖ CORRECT:\n${correctList.join('\n')}\n\n`;
        if (incorrectList.length) report += `‚ùå INCORRECT:\n${incorrectList.join('\n')}\n\n`;
        report += `Report generated via Mini OpenStax.`;

        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(report)}`;
        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}/20</h3>
            <p><strong>${mastery ? 'üéâ Excellent!' : 'Keep practicing.'}</strong></p>
            <p>Time: ${timeOnTask}s | Attempts: ${attempts}</p>
            <a href="${url}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report via WhatsApp</a>
          </div>`;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const el = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(el ? el.value : null);
          }
          if (answers.includes(null)) { alert("Please answer all questions."); return; }
          showFeedback(answers);
        });
      }

      function initNamePrompt() {
        const saved = localStorage.getItem('student_name');
        const promptDiv = document.getElementById('student-name-prompt');
        const quizDiv = document.getElementById('quiz-container');
        const display = document.getElementById('name-display');
        const input = document.getElementById('student-name');
        const buttons = document.getElementById('name-buttons');

        promptDiv.style.display = 'block';
        if (saved) {
          display.innerHTML = `<p><strong>Current name:</strong> ${saved}</p>`;
          buttons.innerHTML = `<button type="button" class="btn" id="keep-btn">‚úÖ Keep This Name</button> <button type="button" class="btn btn-secondary" id="change-btn">‚úèÔ∏è Change</button>`;
          document.getElementById('keep-btn').onclick = () => { promptDiv.style.display = 'none'; quizDiv.style.display = 'block'; };
          document.getElementById('change-btn').onclick = () => { display.style.display = 'none'; input.style.display = 'block'; input.value = ''; input.focus(); buttons.innerHTML = `<button type="button" class="btn" id="save-new">üíæ Save & Start</button>`; document.getElementById('save-new').onclick = saveName; };
        } else {
          display.style.display = 'none'; input.style.display = 'block'; buttons.innerHTML = `<button type="button" class="btn" id="save-first">üíæ Save & Start</button>`; document.getElementById('save-first').onclick = saveName;
        }

        function saveName() {
          const name = input.value.trim();
          if (name) { localStorage.setItem('student_name', name); promptDiv.style.display = 'none'; quizDiv.style.display = 'block'; }
          else { alert("Please enter your name."); }
        }
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation(); renderWords(); renderSentences(); renderQuiz(); setupQuizListeners(); initNamePrompt();
      }

      init();
    })();
  </script>
</body>
</html>
