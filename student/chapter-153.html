<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 154 ‚Äî The -dge Ending (/j/ sound)"/>
  <title>Mini OpenStax ‚Äî Lesson 154: The -dge Ending (/j/ sound)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 154: The -dge Ending (/j/ sound)</h1>
        <div class="lo-tags" id="lo-tags">LO PH154: Decode words ending in '-dge' where it makes the soft /j/ sound.</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List: The -dge Ending</h2>
        <p>In these words, the trigraph <strong>-dge</strong> works together to make the <strong>/j/</strong> sound (like the letter J) at the end of a word:</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read these sentences aloud, focusing on the soft /j/ sound at the end of the <strong>-dge</strong> words:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Test your knowledge of words ending in -dge.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      const currentChapter = 153; // chapter-153.html = Lesson 154
      const maxChapter = 155;

      const CHAPTER_CONFIG = {
        title: "Lesson 154: The -dge Ending (/j/ sound)",
        loTags: ["LO PH154: Decode words ending in '-dge' where it makes the soft /j/ sound."],
        contentWords: [
          "edge", "hedge", "ledge", "wedge", "pledge", "badge", "ridge", "bridge", "dodge", "lodge", "budge", "fudge", "judge", "nudge", "grudge", "smudge"
        ],
        sentences: [
          "1) A hedge ran along the edge of the lawn.",
          "2) The cottage sits near the edge of the village.",
          "3) Scott must dodge the bee to avoid getting stung.",
          "4) The rock was so big that ten men could not budge it.",
          "5) A sailboat sailed under the bridge and into the bay.",
          "6) As a treat, Gail had a banana split with fudge sauce.",
          "7) I saw Nancy nudge Sally and whisper something to her.",
          "8) The angry man still held a grudge about the accident."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Where did the hedge run?", options: [{id:"a",text:"along the edge of the lawn",is_correct:true},{id:"b",text:"under the bridge",is_correct:false},{id:"c",text:"on a ledge",is_correct:false}] },
          { id: "2", prompt: "Where does the cottage sit?", options: [{id:"a",text:"near the edge of the village",is_correct:true},{id:"b",text:"on a mountain ridge",is_correct:false},{id:"c",text:"in a lodge",is_correct:false}] },
          { id: "3", prompt: "What must Scott do to avoid getting stung?", options: [{id:"a",text:"dodge the bee",is_correct:true},{id:"b",text:"nudge the bee",is_correct:false},{id:"c",text:"budge the bee",is_correct:false}] },
          { id: "4", prompt: "Why could ten men not move the rock?", options: [{id:"a",text:"it was too big to budge",is_correct:true},{id:"b",text:"it was on a bridge",is_correct:false},{id:"c",text:"it was a fudge rock",is_correct:false}] },
          { id: "5", prompt: "Where did the sailboat sail?", options: [{id:"a",text:"under the bridge",is_correct:true},{id:"b",text:"over a hedge",is_correct:false},{id:"c",text:"into a lodge",is_correct:false}] },
          { id: "6", prompt: "What kind of sauce did Gail have on her banana split?", options: [{id:"a",text:"fudge sauce",is_correct:true},{id:"b",text:"wedge sauce",is_correct:false},{id:"c",text:"grudge sauce",is_correct:false}] },
          { id: "7", prompt: "What did Nancy do to Sally before whispering?", options: [{id:"a",text:"nudge her",is_correct:true},{id:"b",text:"judge her",is_correct:false},{id:"c",text:"smudge her",is_correct:false}] },
          { id: "8", prompt: "What did the angry man hold about the accident?", options: [{id:"a",text:"a grudge",is_correct:true},{id:"b",text:"a badge",is_correct:false},{id:"c",text:"a pledge",is_correct:false}] },
          { id: "9", prompt: "Which word refers to a row of bushes acting as a fence?", options: [{id:"a",text:"hedge",is_correct:true},{id:"b",text:"ledge",is_correct:false},{id:"c",text:"ridge",is_correct:false}] },
          { id: "10", prompt: "Which word means a narrow shelf sticking out from a wall or cliff?", options: [{id:"a",text:"ledge",is_correct:true},{id:"b",text:"wedge",is_correct:false},{id:"c",text:"bridge",is_correct:false}] },
          { id: "11", prompt: "Which word means a serious promise?", options: [{id:"a",text:"pledge",is_correct:true},{id:"b",text:"badge",is_correct:false},{id:"c",text:"judge",is_correct:false}] },
          { id: "12", prompt: "Which word refers to a long narrow hilltop or mountain range?", options: [{id:"a",text:"ridge",is_correct:true},{id:"b",text:"bridge",is_correct:false},{id:"c",text:"lodge",is_correct:false}] },
          { id: "13", prompt: "Which word means to move or shift something even a little bit?", options: [{id:"a",text:"budge",is_correct:true},{id:"b",text:"dodge",is_correct:false},{id:"c",text:"nudge",is_correct:false}] },
          { id: "14", prompt: "Which word refers to a person who decides cases in a court of law?", options: [{id:"a",text:"judge",is_correct:true},{id:"b",text:"badge",is_correct:false},{id:"c",text:"lodge",is_correct:false}] },
          { id: "15", prompt: "Which word means a dirty mark or blur?", options: [{id:"a",text:"smudge",is_correct:true},{id:"b",text:"fudge",is_correct:false},{id:"c",text:"wedge",is_correct:false}] },
          { id: "16", prompt: "Which word refers to an object worn to show rank or membership?", options: [{id:"a",text:"badge",is_correct:true},{id:"b",text:"lodge",is_correct:false},{id:"c",text:"hedge",is_correct:false}] },
          { id: "17", prompt: "Which word means a piece of wood or metal used to split or secure things?", options: [{id:"a",text:"wedge",is_correct:true},{id:"b",text:"ledge",is_correct:false},{id:"c",text:"bridge",is_correct:false}] },
          { id: "18", prompt: "Which word means a cabin or a place for travelers to stay?", options: [{id:"a",text:"lodge",is_correct:true},{id:"b",text:"dodge",is_correct:false},{id:"c",text:"ridge",is_correct:false}] },
          { id: "19", prompt: "In the word 'bridge', what sound does 'dge' make?", options: [{id:"a",text:"/j/ sound",is_correct:true},{id:"b",text:"/g/ sound",is_correct:false},{id:"c",text:"/d/ sound",is_correct:false}] },
          { id: "20", prompt: "Which word describes a sweet, soft chocolate candy?", options: [{id:"a",text:"fudge",is_correct:true},{id:"b",text:"grudge",is_correct:false},{id:"c",text:"budge",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => `
          <div class="question">
            <strong>${q.id}. ${q.prompt}</strong>
            <div class="options">
              ${q.options.map(opt => `
                <div class="option">
                  <label>
                    <input type="radio" name="q${q.id}" value="${opt.id}" required> ${opt.id.toUpperCase()}. ${opt.text}
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOpt = item.options.find(o => o.is_correct);
          const isCorrect = userAns === correctOpt.id;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 154*\nStudent: [Name]\nScore: ${score}\n\n`;
        const message = encodeURIComponent(summary + correctList.join('\n\n') + '\n\n' + incorrectList.join('\n\n'));
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      init();
    })();
  </script>
</body>
</html>
