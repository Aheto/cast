<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 154 ‚Äî Soft G Pattern (-dge)"/>
  <title>Mini OpenStax ‚Äî Lesson 154: -dge Pattern</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 154: -dge Pattern</h1>
        <div class="lo-tags" id="lo-tags">LO PH154: Decode words with the -dge pattern (Soft G family)</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words ending in the <strong>-dge</strong> pattern (Soft G /j/ sound):</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. All words are decodable through Lesson 154:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      const currentChapter = 153;    // chapter-153.html = Lesson 154
      const maxChapter = 262;        // Updated based on source 19

      const CHAPTER_CONFIG = {
        title: "Lesson 154: -dge Pattern",
        loTags: ["LO PH154: Decode words with the -dge pattern (Soft G family)"],
        contentWords: [
          "edge", "hedge", "ledge", "wedge", "pledge", "badge", "ridge", "bridge", "dodge", "lodge", "budge", "fudge", "judge", "nudge", "grudge", "smudge"
        ],
        sentences: [
          "A hedge ran along the edge of the lawn.",
          "The cottage sits near the edge of the village.",
          "Scott must dodge the bee to avoid getting stung.",
          "The rock was so big that ten men could not budge it.",
          "A sailboat sailed under the bridge and into the bay.",
          "As a treat, Gail had a banana split with fudge sauce.",
          "I saw Nancy nudge Sally and whisper something to her.",
          "The angry man still held a grudge about the accident."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word ends with the /j/ sound spelled -dge?", options: [{id:"a",text:"bridge",is_correct:true},{id:"b",text:"bring",is_correct:false},{id:"c",text:"brick",is_correct:false},{id:"d",text:"brag",is_correct:false}] },
          { id: "2", prompt: "In the word 'edge', what sound does 'dge' make?", options: [{id:"a",text:"/g/",is_correct:false},{id:"b",text:"/j/",is_correct:true},{id:"c",text:"/d/",is_correct:false},{id:"d",text:"/z/",is_correct:false}] },
          { id: "3", prompt: "Which word means a row of bushes planted close together?", options: [{id:"a",text:"wedge",is_correct:false},{id:"b",text:"hedge",is_correct:true},{id:"c",text:"ledge",is_correct:false},{id:"d",text:"pledge",is_correct:false}] },
          { id: "4", prompt: "Complete the sentence: 'The sailboat sailed under the ___.'", options: [{id:"a",text:"bridge",is_correct:true},{id:"b",text:"badge",is_correct:false},{id:"c",text:"budge",is_correct:false},{id:"d",text:"dodge",is_correct:false}] },
          { id: "5", prompt: "Which word means to move slightly?", options: [{id:"a",text:"judge",is_correct:false},{id:"b",text:"budge",is_correct:true},{id:"c",text:"ridge",is_correct:false},{id:"d",text:"lodge",is_correct:false}] },
          { id: "6", prompt: "What did Gail have with her banana split?", options: [{id:"a",text:"fudge sauce",is_correct:true},{id:"b",text:"ledge sauce",is_correct:false},{id:"c",text:"wedge sauce",is_correct:false},{id:"d",text:"nudge sauce",is_correct:false}] },
          { id: "7", prompt: "Which word means to avoid something by moving quickly?", options: [{id:"a",text:"nudge",is_correct:false},{id:"b",text:"dodge",is_correct:true},{id:"c",text:"lodge",is_correct:false},{id:"d",text:"pledge",is_correct:false}] },
          { id: "8", prompt: "How many letters are in the pattern that makes the /j/ sound in these words?", options: [{id:"a",text:"1",is_correct:false},{id:"b",text:"2",is_correct:false},{id:"c",text:"3",is_correct:true},{id:"d",text:"4",is_correct:false}] },
          { id: "9", prompt: "Which word means a formal promise?", options: [{id:"a",text:"pledge",is_correct:true},{id:"b",text:"smudge",is_correct:false},{id:"c",text:"grudge",is_correct:false},{id:"d",text:"bridge",is_correct:false}] },
          { id: "10", prompt: "Identify the -dge word: 'The rock was too big to move.'", options: [{id:"a",text:"budge",is_correct:true},{id:"b",text:"rock",is_correct:false},{id:"c",text:"big",is_correct:false},{id:"d",text:"move",is_correct:false}] },
          { id: "11", prompt: "Which word means a persistent feeling of ill will?", options: [{id:"a",text:"grudge",is_correct:true},{id:"b",text:"judge",is_correct:false},{id:"c",text:"nudge",is_correct:false},{id:"d",text:"lodge",is_correct:false}] },
          { id: "12", prompt: "What did Nancy do to Sally?", options: [{id:"a",text:"nudge",is_correct:true},{id:"b",text:"judge",is_correct:false},{id:"c",text:"dodge",is_correct:false},{id:"d",text:"pledge",is_correct:false}] },
          { id: "13", prompt: "Which word refers to a dirty mark or smear?", options: [{id:"a",text:"smudge",is_correct:true},{id:"b",text:"badge",is_correct:false},{id:"c",text:"ridge",is_correct:false},{id:"d",text:"ledge",is_correct:false}] },
          { id: "14", prompt: "Where does the cottage sit?", options: [{id:"a",text:"edge of the village",is_correct:true},{id:"b",text:"on a bridge",is_correct:false},{id:"c",text:"on a ridge",is_correct:false},{id:"d",text:"in a hedge",is_correct:false}] },
          { id: "15", prompt: "Which word is a person who decides cases in a law court?", options: [{id:"a",text:"judge",is_correct:true},{id:"b",text:"lodge",is_correct:false},{id:"c",text:"badge",is_correct:false},{id:"d",text:"wedge",is_correct:false}] },
          { id: "16", prompt: "Which word rhymes with 'ridge'?", options: [{id:"a",text:"bridge",is_correct:true},{id:"b",text:"edge",is_correct:false},{id:"c",text:"dodge",is_correct:false},{id:"d",text:"fudge",is_correct:false}] },
          { id: "17", prompt: "How many -dge words are in: 'A hedge ran along the edge'?", options: [{id:"a",text:"1",is_correct:false},{id:"b",text:"2",is_correct:true},{id:"c",text:"3",is_correct:false},{id:"d",text:"0",is_correct:false}] },
          { id: "18", prompt: "Which word describes a long, narrow hilltop or mountain range?", options: [{id:"a",text:"ridge",is_correct:true},{id:"b",text:"ledge",is_correct:false},{id:"c",text:"wedge",is_correct:false},{id:"d",text:"lodge",is_correct:false}] },
          { id: "19", prompt: "What must Scott dodge?", options: [{id:"a",text:"a bee",is_correct:true},{id:"b",text:"a ball",is_correct:false},{id:"c",text:"a bus",is_correct:false},{id:"d",text:"a bridge",is_correct:false}] },
          { id: "20", prompt: "What is the phonetic sound of 'dge'?", options: [{id:"a",text:"/j/",is_correct:true},{id:"b",text:"/d-g-e/",is_correct:false},{id:"c",text:"/g/",is_correct:false},{id:"d",text:"/s/",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        form.innerHTML = CHAPTER_CONFIG.assessmentItems.map(q => `
          <div class="question">
            <strong>${q.id}. ${q.prompt}</strong>
            <div class="options">
              ${q.options.map(opt => `
                <div class="option">
                  <label>
                    <input type="radio" name="q${q.id}" value="${opt.id}" required> ${opt.id.toUpperCase()}. ${opt.text}
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
        `).join('');
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOpt = item.options.find(o => o.is_correct);
          const isCorrect = userAns === correctOpt.id;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 154*\nStudent: [Name]\nScore: ${score}\n\n`;
        const correctStr = correctList.length ? '‚úÖ CORRECT:\n' + correctList.join('\n\n') + '\n\n' : '';
        const incorrectStr = incorrectList.length ? '‚ùå INCORRECT:\n' + incorrectList.join('\n\n') : '';
        const message = encodeURIComponent(summary + correctStr + incorrectStr + `\nReport generated via Mini OpenStax. Share with instructor: https://wa.me/${CHAPTER_CONFIG.whatsappNumber}`);
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><strong>${correctCount >= 15 ? 'Excellent! You‚Äôve mastered the -dge pattern!' : correctCount >= 10 ? 'Good! Review missed items.' : 'Practice Lesson 154 words again.'}</strong></p>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
