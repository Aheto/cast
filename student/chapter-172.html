<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Mini OpenStax: Lesson 173 ‚Äî Open Syllables (a=/ƒÅ/)"/>
  <title>Mini OpenStax ‚Äî Lesson 173: Open Syllables (a=/ƒÅ/)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; color: #333; }
    .container { max-width: 800px; margin: 0 auto; padding: 1rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; }
    .role-badge { background: #e9ecef; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem; }
    .chapter-nav { margin: 1.2rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; justify-content: center; }
    .chapter-btn {
      padding: 0.4rem 0.8rem; background: #007bff; color: white; text-decoration: none; border-radius: 4px; font-size: 0.9rem;
    }
    .chapter-btn.active, .chapter-btn:hover { background: #0056b3; }
    .section { margin-bottom: 1.5rem; }
    .word-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
    .word-item { background: #f8f9fa; padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; }
    .sentences { line-height: 1.6; }
    .quiz { margin-top: 2rem; }
    .question { margin-bottom: 1.2rem; }
    .options { margin-left: 1rem; }
    .option { margin: 0.4rem 0; }
    .btn { background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    .btn:hover { background: #218838; }
    .feedback { margin-top: 1.5rem; padding: 1rem; background: #f8f9fa; border-left: 4px solid #007bff; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 id="chapter-title">Lesson 173: Open Syllables (a=/ƒÅ/)</h1>
        <div class="lo-tags" id="lo-tags">LO PH173: Decode words with open syllables where a = /ƒÅ/</div>
      </div>
      <div class="role-badge">Student View</div>
    </div>

    <nav class="chapter-nav" id="chapter-nav"></nav>

    <main id="main-content">
      <div class="section">
        <h2>üî§ Word List</h2>
        <p>Words containing <strong>open syllables</strong> where <em>a = /ƒÅ/</em> (the vowel says its name):</p>
        <div class="word-list" id="word-list"></div>
      </div>

      <div class="section">
        <h2>üìñ Practice Sentences</h2>
        <p>Read aloud. All words are decodable from Lessons 2‚Äì173:</p>
        <div class="sentences" id="sentences"></div>
      </div>

      <div class="quiz" id="quiz-container">
        <h2>üìù Quick Check (20 Questions)</h2>
        <p>Select the best answer for each question.</p>
        <form id="quiz-form"></form>
        <button type="button" class="btn" id="submit-quiz">Check Answers</button>
      </div>

      <div id="feedback"></div>
    </main>
  </div>

  <script>
    (function () {
      'use strict';

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      const currentChapter = 172;   // chapter-172.html = Lesson 173
      const maxChapter = 261;

      const CHAPTER_CONFIG = {
        title: "Lesson 173: Open Syllables (a=/ƒÅ/)",
        loTags: ["LO PH173: Decode words with open syllables where a = /ƒÅ/"],
        contentWords: [
          "able", "cable", "fable", "table", "stable", "cradle", "maple", "staple",
          "lady", "shady", "baby", "navy", "gravy", "lazy", "crazy",
          "later", "paper", "baker", "bacon", "basic", "basis",
          "label", "fatal", "native", "April", "acre", "agent"
        ],
        sentences: [
          "April can read at a basic level.",
          "The bottle of medicine has a label on it.",
          "Steve wasn't able to finish the huge meal.",
          "The table in the kitchen is made of solid oak.",
          "At sunrise, the navy ship set sail for South America.",
          "A metal staple held the two sheets of paper together.",
          "If you rock the baby in its cradle, it will go to sleep.",
          "A travel agent can arrange for you to get an airplane ticket.",
          "The lazy boy lay down in the shade of the maple tree and had a nap."
        ],
        whatsappNumber: "233257320201",
        assessmentItems: [
          { id: "1", prompt: "Which word contains an open syllable with a=/ƒÅ/?", options: [{id:"a",text:"paper",is_correct:true},{id:"b",text:"pat",is_correct:false},{id:"c",text:"pan",is_correct:false},{id:"d",text:"pad",is_correct:false}] },
          { id: "2", prompt: "Which is NOT a Lesson 173 word?", options: [{id:"a",text:"agent",is_correct:false},{id:"b",text:"acre",is_correct:false},{id:"c",text:"fable",is_correct:false},{id:"d",text:"gable",is_correct:true}] },
          { id: "3", prompt: "Why does 'a' say /ƒÅ/ in 'baby'?", options: [{id:"a",text:"It's in an open syllable",is_correct:true},{id:"b",text:"Silent e",is_correct:false},{id:"c",text:"R-controlled",is_correct:false},{id:"d",text:"Vowel team",is_correct:false}] },
          { id: "4", prompt: "Which word means 'a short story that teaches a lesson'?", options: [{id:"a",text:"fable",is_correct:true},{id:"b",text:"table",is_correct:false},{id:"c",text:"cable",is_correct:false},{id:"d",text:"stable",is_correct:false}] },
          { id: "5", prompt: "How many syllables in 'basic'?", options: [{id:"a",text:"2",is_correct:true},{id:"b",text:"1",is_correct:false},{id:"c",text:"3",is_correct:false},{id:"d",text:"4",is_correct:false}] },
          { id: "6", prompt: "Which sentence uses only Lesson 173 words?", options: [{id:"a",text:"The table in the kitchen is made of solid oak.",is_correct:true},{id:"b",text:"She sat on a mat.",is_correct:false},{id:"c",text:"He ran fast.",is_correct:false},{id:"d",text:"They played ball.",is_correct:false}] },
          { id: "7", prompt: "Which word means 'not able to move quickly'?", options: [{id:"a",text:"lazy",is_correct:true},{id:"b",text:"crazy",is_correct:false},{id:"c",text:"shady",is_correct:false},{id:"d",text:"navy",is_correct:false}] },
          { id: "8", prompt: "What syllable type is 'ba' in 'baby'?", options: [{id:"a",text:"Closed",is_correct:false},{id:"b",text:"Open",is_correct:true},{id:"c",text:"Magic E",is_correct:false},{id:"d",text:"Vowel Team",is_correct:false}] },
          { id: "9", prompt: "In 'April can read at a basic level,' how many Lesson 173 words?", options: [{id:"a",text:"2",is_correct:true},{id:"b",text:"1",is_correct:false},{id:"c",text:"3",is_correct:false},{id:"d",text:"0",is_correct:false}] },
          { id: "10", prompt: "Which word means 'a person who represents travelers'?", options: [{id:"a",text:"agent",is_correct:true},{id:"b",text:"baker",is_correct:false},{id:"c",text:"native",is_correct:false},{id:"d",text:"lady",is_correct:false}] },
          { id: "11", prompt: "Which word refers to a month of the year?", options: [{id:"a",text:"April",is_correct:true},{id:"b",text:"acre",is_correct:false},{id:"c",text:"fatal",is_correct:false},{id:"d",text:"gravy",is_correct:false}] },
          { id: "12", prompt: "Which word ends with an open syllable and means 'a strip of land'?", options: [{id:"a",text:"acre",is_correct:true},{id:"b",text:"maple",is_correct:false},{id:"c",text:"staple",is_correct:false},{id:"d",text:"label",is_correct:false}] },
          { id: "13", prompt: "Which sentence is from Lesson 173?", options: [{id:"a",text:"If you rock the baby in its cradle, it will go to sleep.",is_correct:true},{id:"b",text:"She likes apples.",is_correct:false},{id:"c",text:"He jumped high.",is_correct:false},{id:"d",text:"They walked home.",is_correct:false}] },
          { id: "14", prompt: "How many consonants in 'cable'?", options: [{id:"a",text:"3",is_correct:true},{id:"b",text:"2",is_correct:false},{id:"c",text:"4",is_correct:false},{id:"d",text:"1",is_correct:false}] },
          { id: "15", prompt: "Which word is a noun meaning 'a place for horses'?", options: [{id:"a",text:"stable",is_correct:true},{id:"b",text:"table",is_correct:false},{id:"c",text:"fable",is_correct:false},{id:"d",text:"able",is_correct:false}] },
          { id: "16", prompt: "What phonics concept explains the /ƒÅ/ in 'later'?", options: [{id:"a",text:"Open syllable",is_correct:true},{id:"b",text:"Magic E",is_correct:false},{id:"c",text:"R-controlled",is_correct:false},{id:"d",text:"Closed syllable",is_correct:false}] },
          { id: "17", prompt: "Which word means 'doomed or deadly'?", options: [{id:"a",text:"fatal",is_correct:true},{id:"b",text:"native",is_correct:false},{id:"c",text:"basic",is_correct:false},{id:"d",text:"crazy",is_correct:false}] },
          { id: "18", prompt: "Which word might complete: 'She wrote her name on the ___.'?", options: [{id:"a",text:"label",is_correct:true},{id:"b",text:"bacon",is_correct:false},{id:"c",text:"gravy",is_correct:false},{id:"d",text:"acre",is_correct:false}] },
          { id: "19", prompt: "Which word appears in both the word list and sentences?", options: [{id:"a",text:"paper",is_correct:true},{id:"b",text:"baby",is_correct:true},{id:"c",text:"agent",is_correct:true},{id:"d",text:"All of the above",is_correct:true}] },
          { id: "20", prompt: "What phonics concept is taught in Lesson 173?", options: [{id:"a",text:"Open syllables (a=/ƒÅ/)",is_correct:true},{id:"b",text:"Magic E (a=/ƒÅ/)",is_correct:false},{id:"c",text:"R-controlled vowels",is_correct:false},{id:"d",text:"Vowel teams",is_correct:false}] }
        ]
      };

      function renderWords() {
        const container = document.getElementById('word-list');
        container.innerHTML = CHAPTER_CONFIG.contentWords.map(word =>
          `<span class="word-item">${word}</span>`
        ).join('');
      }

      function renderSentences() {
        const container = document.getElementById('sentences');
        container.innerHTML = CHAPTER_CONFIG.sentences.map(s =>
          `<p>${s}</p>`
        ).join('');
      }

      function renderNavigation() {
        const nav = document.getElementById('chapter-nav');
        const buttons = [];
        buttons.push({ label: "Home", url: "../index.html", active: false });
        for (let i = 0; i < 4; i++) {
          const chapterNum = currentChapter + i;
          if (chapterNum > maxChapter) break;
          const lessonNum = chapterNum + 1;
          buttons.push({
            label: `Lesson ${lessonNum}`,
            url: `chapter-${chapterNum}.html`,
            active: (i === 0)
          });
        }
        nav.innerHTML = buttons.map(btn => `
          <a href="${btn.url}" class="chapter-btn ${btn.active ? 'active' : ''}">
            ${btn.label}
          </a>
        `).join('');
      }

      function renderQuiz() {
        const form = document.getElementById('quiz-form');
        window.quizCorrectMap = {};

        const quizHTML = CHAPTER_CONFIG.assessmentItems.map(q => {
          let shuffledOptions = [...q.options];
          shuffle(shuffledOptions);

          const correctOpt = q.options.find(opt => opt.is_correct);
          window.quizCorrectMap[q.id] = correctOpt.id;

          const optionsHTML = shuffledOptions.map((opt, idx) => {
            const label = String.fromCharCode(97 + idx).toUpperCase();
            return `
              <div class="option">
                <label>
                  <input type="radio" name="q${q.id}" value="${opt.id}" required> ${label}. ${opt.text}
                </label>
              </div>
            `;
          }).join('');

          return `
            <div class="question">
              <strong>${q.id}. ${q.prompt}</strong>
              <div class="options">
                ${optionsHTML}
              </div>
            </div>
          `;
        }).join('');

        form.innerHTML = quizHTML;
      }

      function showFeedback(answers) {
        const items = CHAPTER_CONFIG.assessmentItems;
        let correctCount = 0;
        let correctList = [], incorrectList = [];

        items.forEach((item, i) => {
          const userAns = answers[i];
          const correctOptId = window.quizCorrectMap[item.id];
          const correctOpt = item.options.find(o => o.id === correctOptId);
          const isCorrect = userAns === correctOptId;
          if (isCorrect) {
            correctCount++;
            correctList.push(`${item.id}. ${item.prompt}\n   ‚úÖ Correct: ${correctOpt.text}`);
          } else {
            incorrectList.push(`${item.id}. ${item.prompt}\n   ‚ùå You chose: ${item.options.find(o => o.id === userAns)?.text || '‚Äî'}\n   ‚úÖ Correct: ${correctOpt.text}`);
          }
        });

        const score = `${correctCount}/20`;
        const summary = `*Mini OpenStax ‚Äî Phonics Lesson 173*\nStudent: [Name]\nScore: ${score}\n\n`;
        const correctStr = correctList.length ? '‚úÖ CORRECT:\n' + correctList.join('\n\n') + '\n\n' : '';
        const incorrectStr = incorrectList.length ? '‚ùå INCORRECT:\n' + incorrectList.join('\n\n') : '';
        const message = encodeURIComponent(summary + correctStr + incorrectStr + `\nReport generated via Mini OpenStax. Share with instructor: https://wa.me/${CHAPTER_CONFIG.whatsappNumber}`);
        const whatsappLink = `https://wa.me/${CHAPTER_CONFIG.whatsappNumber}?text=${message}`;

        document.getElementById('feedback').innerHTML = `
          <div class="feedback">
            <h3>üìä Results: ${score}</h3>
            <p><strong>${correctCount >= 15 ? 'Excellent! You‚Äôve mastered open syllables with a=/ƒÅ/!' : correctCount >= 10 ? 'Good! Review missed items.' : 'Practice Lesson 173 words again.'}</strong></p>
            <p><a href="${whatsappLink}" target="_blank" class="btn" style="background:#25D366;display:inline-block;text-decoration:none;">üì≤ Send Report to Instructor</a></p>
          </div>
        `;
      }

      function setupQuizListeners() {
        document.getElementById('submit-quiz').addEventListener('click', () => {
          const form = document.getElementById('quiz-form');
          const answers = [];
          for (let i = 1; i <= 20; i++) {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            answers.push(selected ? selected.value : null);
          }
          if (answers.includes(null)) {
            alert("Please answer all questions.");
            return;
          }
          showFeedback(answers);
        });
      }

      function init() {
        document.getElementById('chapter-title').textContent = CHAPTER_CONFIG.title;
        document.getElementById('lo-tags').textContent = CHAPTER_CONFIG.loTags[0];
        renderNavigation();
        renderWords();
        renderSentences();
        renderQuiz();
        setupQuizListeners();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
